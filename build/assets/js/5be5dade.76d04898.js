"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[5790],{56192:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>r,default:()=>l,frontMatter:()=>a,metadata:()=>c,toc:()=>d});var i=t(85893),s=t(11151);const a={},r="NFT Marketplace on Lux",c={id:"deprecated/tutorials-contest/2021/NFT-Marketplace-on-Lux/README",title:"NFT Marketplace on Lux",description:"These tutorials were published as a snapshot of when they were written,",source:"@site/docs/deprecated/tutorials-contest/2021/NFT-Marketplace-on-Lux/README.md",sourceDirName:"deprecated/tutorials-contest/2021/NFT-Marketplace-on-Lux",slug:"/deprecated/tutorials-contest/2021/NFT-Marketplace-on-Lux/",permalink:"/deprecated/tutorials-contest/2021/NFT-Marketplace-on-Lux/",draft:!1,unlisted:!1,editUrl:"https://github.com/luxdefi/docs/edit/main/docs/deprecated/tutorials-contest/2021/NFT-Marketplace-on-Lux/README.md",tags:[],version:"current",frontMatter:{}},o={},d=[{value:"Table of Contents",id:"table-of-contents",level:2},{value:"Introduction",id:"introduction",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Requirements",id:"requirements",level:3},{value:"Getting Started",id:"getting-started",level:2},{value:"Building the Workspace",id:"building-the-workspace",level:3},{value:"Creating the NFT Token",id:"creating-the-nft-token",level:2},{value:"Contracts for the Marketplace",id:"contracts-for-the-marketplace",level:2},{value:"Auction Contract",id:"auction-contract",level:3},{value:"Starting with the Functions",id:"starting-with-the-functions",level:4},{value:"Events",id:"events",level:4},{value:"Storage Variables",id:"storage-variables",level:4},{value:"Constructor Function",id:"constructor-function",level:4},{value:"Building the Functions",id:"building-the-functions",level:4},{value:"Get the Auction State",id:"get-the-auction-state",level:5},{value:"Placing Bids",id:"placing-bids",level:5},{value:"Cancel Auction",id:"cancel-auction",level:5},{value:"Withdraw Token",id:"withdraw-token",level:5},{value:"Withdraw Funds",id:"withdraw-funds",level:5},{value:"Get All Bids",id:"get-all-bids",level:5},{value:"Auction Manager Contract",id:"auction-manager-contract",level:2},{value:"Building the Functions",id:"building-the-functions-1",level:3},{value:"Create Auction",id:"create-auction",level:4},{value:"Get Auctions",id:"get-auctions",level:4},{value:"LUX Testnet",id:"lux-testnet",level:2},{value:"Deploying the Contracts",id:"deploying-the-contracts",level:2},{value:"React App",id:"react-app",level:2},{value:"Building the Form",id:"building-the-form",level:2},{value:"Interacting with Contracts",id:"interacting-with-contracts",level:2},{value:"Contract ABIs",id:"contract-abis",level:3},{value:"Detecting and Connecting to MetaMask",id:"detecting-and-connecting-to-metamask",level:3},{value:"Minting an NFT",id:"minting-an-nft",level:2},{value:"Owned NFT&#39;s",id:"owned-nfts",level:2},{value:"Creating an Auction",id:"creating-an-auction",level:2},{value:"Getting the List of Auctions",id:"getting-the-list-of-auctions",level:2},{value:"Building the Auction Page",id:"building-the-auction-page",level:2},{value:"Rendering the Selected Auction",id:"rendering-the-selected-auction",level:3},{value:"Auction Functions",id:"auction-functions",level:2},{value:"Placing Bids",id:"placing-bids-1",level:3},{value:"Withdraw Token",id:"withdraw-token-1",level:3},{value:"Withdraw Funds",id:"withdraw-funds-1",level:3},{value:"Cancel Auction",id:"cancel-auction-1",level:3},{value:"Polishing the Buttons",id:"polishing-the-buttons",level:2},{value:"Place Bid Area",id:"place-bid-area",level:3},{value:"Cancel Auction Button",id:"cancel-auction-button",level:3},{value:"Withdraw Funds Button",id:"withdraw-funds-button",level:3},{value:"Withdraw Token Button",id:"withdraw-token-button",level:3},{value:"Finishing the React App",id:"finishing-the-react-app",level:2},{value:"Using with Other NFT Contracts",id:"using-with-other-nft-contracts",level:2},{value:"Next Steps",id:"next-steps",level:2},{value:"Tests",id:"tests",level:2},{value:"Things to Consider",id:"things-to-consider",level:2},{value:"Deploying to the Lux Mainnet",id:"deploying-to-the-lux-mainnet",level:2},{value:"Conclusion",id:"conclusion",level:2}];function h(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"nft-marketplace-on-lux",children:"NFT Marketplace on Lux"}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsx)(n.p,{children:"These tutorials were published as a snapshot of when they were written,\nand may contain out-of-date-information.\nFor up-to-date information, please reach out to the owners of these\nprojects."})}),"\n",(0,i.jsx)(n.p,{children:"Step by step tutorial to build your own NFT marketplace on Lux using Hardhat and React."}),"\n",(0,i.jsx)(n.h2,{id:"table-of-contents",children:"Table of Contents"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#introduction",children:"Introduction"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#prerequisites",children:"Prerequisites"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#requirements",children:"Requirements"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#getting-started",children:"Getting Started"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#building-the-workspace",children:"Building the workspace"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#creating-the-nft-token",children:"Creating the NFT Token"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#contracts-for-the-marketplace",children:"Contracts for the marketplace"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#auction-contract",children:"Auction Contract"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#starting-with-the-functions",children:"Starting with the functions"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#events",children:"Events"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#storage-variables",children:"Storage variables"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#constructor-function",children:"Constructor function"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#building-the-functions",children:"Building the functions"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#get-the-auction-state",children:"Get the auction state"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#placing-bids",children:"Placing bids"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#cancel-auction",children:"Cancel auction"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#withdraw-token",children:"Withdraw Token"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#withdraw-funds",children:"Withdraw Funds"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#get-all-bids",children:"Get all bids"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#auction-manager-contract",children:"Auction Manager Contract"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#building-the-functions-1",children:"Building the functions"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#create-auction",children:"Create auction"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#get-auctions",children:"Get Auctions"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#lux-testnet",children:"LUX Testnet"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#deploying-the-contracts",children:"Deploying the contracts"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#react-app",children:"React App"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#building-the-form",children:"Building the form"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#interacting-with-contracts",children:"Interacting with contracts"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#contract-abis",children:"Contract ABIs"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#detecting-and-connecting-to-metamask",children:"Detecting and connecting to MetaMask"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#minting-an-nft",children:"Minting an NFT"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#owned-nfts",children:"Owned NFT's"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#creating-an-auction",children:"Creating an auction"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#getting-the-list-of-auctions",children:"Getting the list of auctions"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#building-the-auction-page",children:"Building the auction page"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#rendering-the-selected-auction",children:"Rendering the selected auction"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#auction-functions",children:"Auction Functions"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#placing-bids-1",children:"Placing Bids"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#withdraw-token-1",children:"Withdraw Token"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#withdraw-funds-1",children:"Withdraw Funds"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#cancel-auction-1",children:"Cancel Auction"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#polishing-the-buttons",children:"Polishing the buttons"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#place-bid-area",children:"Place Bid Area"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#cancel-auction-button",children:"Cancel Auction Button"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#withdraw-funds-button",children:"Withdraw Funds Button"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#withdraw-token-button",children:"Withdraw Token Button"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#finishing-the-react-app",children:"Finishing the React App"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#using-with-other-nft-contracts",children:"Using with other NFT contracts"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#next-steps",children:"Next steps"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#tests",children:"Tests"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#things-to-consider",children:"Things to consider"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#deploying-to-the-mainnet",children:"Deploying to the Lux Mainnet"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#conclusion",children:"Conclusion"})}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,i.jsxs)(n.p,{children:["We will be using ",(0,i.jsx)(n.a,{href:"https://reactjs.org",children:"React JS"})," to build the frontend of our\nNFT Marketplace and we will use ",(0,i.jsx)(n.a,{href:"https://docs.ethers.io/v5/",children:"Ethers"})," to interact\nwith the smart contracts on the frontend. For the backend, we will be using our\nsmart contracts that will be deployed on the\n",(0,i.jsx)(n.a,{href:"https://www.lux.network/",children:"Lux"})," chain and that's all. Our NFT Marketplace\nwill live on the blockchain. Totally decentralized! We will be using Hardhat to\ncompile and deploy our smart contracts."]}),"\n",(0,i.jsx)(n.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Basic knowledge of ",(0,i.jsx)(n.a,{href:"https://reactjs.org/",children:"React JS"}),".","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"React is a JavaScript library for building user interfaces. React makes it\neasier to create interactive UIs. The whole UI of the NFT Marketplace is\njust a single file. You may use anything you would like to build your UI\n(Angular, Vanilla JS, Vue.js). The important part is to know how to interact\nwith the blockchain and our smart contracts."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Very basic knowledge of ",(0,i.jsx)(n.a,{href:"https://hardhat.org/",children:"Hardhat"}),".","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Hardhat is a development environment to compile, deploy, test, and debug\nyour solidity code. You may use\n",(0,i.jsx)(n.a,{href:"https://www.trufflesuite.com/truffle",children:"Truffle"})," or any other framework that\nlets you deploy smart contracts as well. I do prefer using Hardhat."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Basic knowledge of ",(0,i.jsx)(n.a,{href:"https://docs.ethers.io/v5/",children:"Ethers"})," library.","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://docs.ethers.io/v5/",children:"Ethers"})," is a JavaScript library for interacting\nwith the blockchain and our smart contracts. Once you get familiar with it,\nyou may use it to interact with the chain in any JavaScript project. You may\nalso use ",(0,i.jsx)(n.a,{href:"https://web3js.readthedocs.io/en/v1.5.0/",children:"Web3 JS"})," if you are more\nfamiliar with it. I find it easier to work with Ethers."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Basic knowledge of ",(0,i.jsx)(n.a,{href:"https://docs.soliditylang.org/en/v0.8.6/#",children:"Solidity"})," language.","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["We will be writing our smart contracts in ",(0,i.jsx)(n.strong,{children:"solidity"}),". A piece of basic\nknowledge is required for you to understand the concepts fully."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"requirements",children:"Requirements"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://nodejs.org/en",children:"Node JS"})," and ",(0,i.jsx)(n.a,{href:"https://www.npmjs.com/",children:"npm"})," must be installed."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://hardhat.org/",children:"Hardhat"})," must be installed."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://metamask.io",children:"MetaMask"})," extension must be installed on your browser."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://www.npmjs.com/package/create-react-app",children:"create-react-app"})," must be installed."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"getting-started",children:"Getting Started"}),"\n",(0,i.jsx)(n.h3,{id:"building-the-workspace",children:"Building the Workspace"}),"\n",(0,i.jsxs)(n.p,{children:["Let's get started by setting up our workspace using ",(0,i.jsx)(n.a,{href:"https://hardhat.org/",children:"Hardhat"}),"."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Execute ",(0,i.jsx)(n.code,{children:"$ npx hardhat init"})," in your working directory."]}),"\n",(0,i.jsxs)(n.li,{children:["When you are prompted on the terminal","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Choose ",(0,i.jsx)(n.code,{children:"Create a basic sample project"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Add the ",(0,i.jsx)(n.code,{children:".gitignore"})," file."]}),"\n",(0,i.jsx)(n.li,{children:"Install the dependencies."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Delete the ",(0,i.jsx)(n.code,{children:"Greeter.sol"})," file inside the contracts folder."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"This will set up our initial workspace."}),"\n",(0,i.jsx)(n.h2,{id:"creating-the-nft-token",children:"Creating the NFT Token"}),"\n",(0,i.jsx)(n.p,{children:"First, we need to create an NFT token that will be displayed in our marketplace."}),"\n",(0,i.jsx)(n.p,{children:"Create a simple ERC-721 token."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{target:"_blank",href:t(12349).Z+"",children:"NFT.sol"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-solidity",children:'contract NFT is ERC721 {\n  using Counters for Counters.Counter;\n  Counters.Counter private _tokenIds;\n  mapping (uint => uint) public itemValue;\n  uint maxValue = 10000; // Max value of an item\n\n  constructor() ERC721("Super NFT", "SPRNFT") {}\n\n  /**\n    Returns a random number\n  */\n  function random() private view returns (uint) {\n        return uint(keccak256(abi.encodePacked(block.difficulty, block.timestamp, block.number)));\n  }\n\n  function myItems() external view returns (uint[] memory items) {\n    // Returns an array of items that the user owns\n    items = new uint[](balanceOf(msg.sender));\n    uint _counter = 0;\n    for(uint i = 1; i < _tokenIds.current(); i++) { // i = 1 because the token counter is increased before the id is assigned\n      if(ownerOf(i) == msg.sender) { // if the user owns the item\n        items[_counter] = i; // add the item to the array\n        _counter++; // increase the counter\n      }\n    }\n    return items;\n  }\n\n  function getItem() payable public returns (uint256) {\n    require(msg.value == 0.5 ether); // 0.5 LUX is the cost of an item\n    _tokenIds.increment(); // Increase the counter\n    uint256 newItemId = _tokenIds.current(); // Get the current counter value\n    _mint(msg.sender, newItemId); // Mint the new item to the user\n    itemValue[newItemId] = random() % maxValue; // Set the item value to a random number modulus used to make sure that the value isn\'t bigger than maxValue\n    return newItemId; // Return the new item id\n  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"ALERT"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Secure random-number generation in the blockchain is a very difficult\nproblem. Our method here is insecure, but since this is just an example, it\nwill be good enough for our purposes."})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"ALERT"})}),"\n",(0,i.jsx)(n.p,{children:"The logic here is very simple."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"User calls the getItem() function and pays 0.5 LUX"}),"\n",(0,i.jsx)(n.li,{children:"The value of the token is determined using a random number."}),"\n",(0,i.jsx)(n.li,{children:"The token is minted to the user."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"And that's all."}),"\n",(0,i.jsx)(n.h2,{id:"contracts-for-the-marketplace",children:"Contracts for the Marketplace"}),"\n",(0,i.jsxs)(n.p,{children:["We will have two contracts, ",(0,i.jsx)(n.code,{children:"AuctionManager"})," and ",(0,i.jsx)(n.code,{children:"Auction"})," contracts.\nAuctionManager contract will create the auctions by deploying the Auction\ncontract using the parameters.\nHere is how it will work:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"The auction creator enters parameters for direct buy price, starting price,\nminimum bid increment, the token id, and the auction end time."}),"\n",(0,i.jsx)(n.li,{children:"The auction creator gives approval for the NFT that will be auctioned to the\nAuctionManager."}),"\n",(0,i.jsx)(n.li,{children:"The AuctionManager creates an Auction with the parameters given and then\ntransfers the NFT to the newly created Auction contract."}),"\n",(0,i.jsx)(n.li,{children:"After the auction is completed, the auction creator and the auction winner\nmust call the withdrawal functions to retrieve their tokens."}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"auction-contract",children:"Auction Contract"}),"\n",(0,i.jsx)(n.h4,{id:"starting-with-the-functions",children:"Starting with the Functions"}),"\n",(0,i.jsx)(n.p,{children:"Our auction contract will allow users to place bids, cancel the auction if there\nare no bids and withdraw their tokens and funds after the auction has been\ncompleted. We will also need a function to get the current state of the auction."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-solidity",children:"contract Auction {\n    function placeBid() payable external returns(bool){} // Place a bid on the auction\n    function withdrawToken() external returns(bool){} // Withdraw the token after the auction is over\n    function withdrawFunds() external returns(bool){} // Withdraw the funds after the auction is over\n    function cancelAuction() external returns(bool){} // Cancel the auction\n    function getAuctionState() public view returns(uint) {} // Get the auction state\n    function allBids() external view returns (address[] memory, uint256[] memory) {} // Returns a list of all bids and addresses\n}\n"})}),"\n",(0,i.jsx)(n.h4,{id:"events",children:"Events"}),"\n",(0,i.jsxs)(n.p,{children:["There will be four events in the contract.\n",(0,i.jsx)(n.code,{children:"NewBid"})," will be emitted each time there is a new bid.\n",(0,i.jsx)(n.code,{children:"WithdrawToken"})," will be emitted when the highest bidder withdraws the token.\n",(0,i.jsx)(n.code,{children:"WithdrawFunds"})," will be emitted when the auction owner withdraws the funds.\n",(0,i.jsx)(n.code,{children:"AuctionCancelled"})," will be emitted when the auction gets canceled."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-solidity",children:"contract Auction {\n    event NewBid(address bidder, uint bid); // A new bid was placed\n    event WithdrawToken(address withdrawer); // The auction winner withdrawed the token\n    event WithdrawFunds(address withdrawer, uint256 amount); // The auction owner withdrawed the funds\n    event AuctionCancelled(); // The auction was cancelled\n}\n"})}),"\n",(0,i.jsx)(n.h4,{id:"storage-variables",children:"Storage Variables"}),"\n",(0,i.jsx)(n.p,{children:"We will need to declare a few variables."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"endTime"})," is the end timestamp of the auction. The auction will end if the\ncurrent timestamp is equal or greater than the ",(0,i.jsx)(n.code,{children:"endTime"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"startTime"})," is the timestamp that marks the start of the auction."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"maxBid"})," the amount of max bid."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"maxBidder"})," is the address of the max bidder."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"creator"})," is the address of the auction creator."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"bids"})," array of bids, we will use this to display recent bids on the web page."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"tokenId"})," is the id of the token that has been auctioned."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"isCancelled"})," will be true if the auction has been canceled."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"isDirectBuy"})," will be true if someone placed a bit with a higher or equal\nvalue than the direct buy price."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"minIncrement"})," is the minimum increment for the bid."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"directBuyPrice"})," is the price for a direct buy."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"startPrice"})," is the starting price for the auction."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"nftAddress"})," is the address of the NFT contract"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"_nft"})," is the NFT token."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-solidity",children:"contract Auction {\n    uint256 public endTime; // Timestamp of the end of the auction (in seconds)\n    uint256 public startTime; // The block timestamp which marks the start of the auction\n    uint maxBid; // The maximum bid\n    address maxBidder; // The address of the maximum bidder\n    address creator; // The address of the auction creator\n    Bid[] public bids; // The bids made by the bidders\n    uint tokenId; // The id of the token\n    bool isCancelled; // If the the auction is cancelled\n    bool isDirectBuy; // True if the auction ended due to direct buy\n    uint minIncrement; // The minimum increment for the bid\n    uint directBuyPrice; // The price for a direct buy\n    uint startPrice; // The starting price for the auction\n    IERC721 _nft; // The NFT token\n\n    enum AuctionState {\n        OPEN,\n        CANCELLED,\n        ENDED,\n        DIRECT_BUY\n    }\n\n    struct Bid { // A bid on an auction\n        address sender;\n        uint256 bid;\n    }\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["We would be using block numbers instead of timestamps. If we were developing\nthis application on another chain such as Ethereum Mainnet, block timestamps are\nbeing set by the miners, and they are spoofable. However, in Lux, there is\nno set block rate; thus, we cannot rely on block numbers. We will be using\n",(0,i.jsx)(n.code,{children:"block.timestamp"})," to measure time. Timestamps are guaranteed to be within 30\nseconds of real-time therefore we do not need to worry about it. ",(0,i.jsx)(n.a,{href:"https://support.lux.network/en/articles/5106526-measuring-time-in-smart-contracts",children:"Read more\nabout it\nhere."}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["The auction will end when the current timestamp is greater than or equal to the\n",(0,i.jsx)(n.code,{children:"endTime"}),". ",(0,i.jsx)(n.code,{children:"endTime"})," is the end timestamp of the auction."]}),"\n",(0,i.jsx)(n.h4,{id:"constructor-function",children:"Constructor Function"}),"\n",(0,i.jsxs)(n.p,{children:["We will need to get some parameters from the ",(0,i.jsx)(n.code,{children:"AuctionManager"})," contract."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-solidity",children:"constructor(address _creator,uint _endTime,uint _minIncrement,uint _directBuyPrice, uint _startPrice,address _nftAddress,uint _tokenId){\n    creator = _creator; // The address of the auction creator\n    endTime = block.timestamp +  _endTime; // The timestamp which marks the end of the auction (now + 30 days = 30 days from now)\n    startBlock = block.timestamp; // The timestamp which marks the start of the auction\n    minIncrement = _minIncrement; // The minimum increment for the bid\n    directBuyPrice = _directBuyPrice; // The price for a direct buy\n    startPrice = _startPrice; // The starting price for the auction\n    _nft = IERC721(_nftAddress); // The address of the nft token\n    nftAddress = _nftAddress;\n    tokenId = _tokenId; // The id of the token\n    maxBidder = _creator; // Setting the maxBidder to auction creator.\n}\n"})}),"\n",(0,i.jsx)(n.h4,{id:"building-the-functions",children:"Building the Functions"}),"\n",(0,i.jsx)(n.h5,{id:"get-the-auction-state",children:"Get the Auction State"}),"\n",(0,i.jsxs)(n.p,{children:["Let's start with the ",(0,i.jsx)(n.code,{children:"getAuctionState"})," function as we are going to use it in\nother functions. First, we need to check if the auction has been canceled and\nreturn ",(0,i.jsx)(n.code,{children:"AuctionState.CANCELLED"})," in that case. Then, we need to check if anyone\nbid more or equal to the direct buy price and return ",(0,i.jsx)(n.code,{children:"AuctionState.DIRECT_BUY"}),"\nin that case. Then, we need to check if the current timestamp is greater or\nequal to the ",(0,i.jsx)(n.code,{children:"endTime"})," and return ",(0,i.jsx)(n.code,{children:"AuctionState.ENDED"})," in that case. Otherwise,\nwe will return ",(0,i.jsx)(n.code,{children:"AuctionState.OPEN"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-solidity",children:"// Get the auction state\nfunction getAuctionState() public view returns(AuctionState) {\n    if(isCancelled) return AuctionState.CANCELLED; // If the auction is cancelled return CANCELLED\n    if(isDirectBuy) return AuctionState.DIRECT_BUY; // If the auction is ended by a direct buy return DIRECT_BUY\n    if(block.timestamp >= endTime) return AuctionState.ENDED; // The auction is over if the block timestamp is greater than the end timestamp, return ENDED\n    return AuctionState.OPEN; // Otherwise return OPEN\n}\n"})}),"\n",(0,i.jsx)(n.h5,{id:"placing-bids",children:"Placing Bids"}),"\n",(0,i.jsxs)(n.p,{children:["Let's start building the function for placing bids.\nThe user calls the ",(0,i.jsx)(n.code,{children:"placeBid"})," function and sends an amount of LUX."]}),"\n",(0,i.jsx)(n.p,{children:"Firstly, there are few things we need to check;"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"The bidder cannot be the auction creator"}),"\n",(0,i.jsx)(n.li,{children:"The auction must be open."}),"\n",(0,i.jsx)(n.li,{children:"The bid must be greater than the start price."}),"\n",(0,i.jsx)(n.li,{children:"The bid must be greater than the highest bid + minimum bid increment."}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-solidity",children:"function placeBid() payable external returns(bool){\n    require(msg.sender != creator); // The auction creator can not place a bid\n    require(getAuctionState() == AuctionState.OPEN); // The auction must be open\n    require(msg.value > startPrice); // The bid must be higher than the starting price\n    require(msg.value > maxBid + minIncrement); // The bid must be higher than the current bid\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:"Next, we will set the new max bid and the max bidder. After that, we will store\nthe value of the last highest bid and the bidder because we will need this\ninformation later."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-solidity",children:"address lastHightestBidder = maxBidder; // The address of the last highest bidder\nuint256 lastHighestBid = maxBid; // The last highest bid\nmaxBid = msg.value; // The new highest bid\nmaxBidder = msg.sender; // The address of the new highest bidder\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Next, we have to check if the bid (",(0,i.jsx)(n.code,{children:"msg.value"}),") is greater or equal to the\ndirect buy price. In that case, we will need to set the ",(0,i.jsx)(n.code,{children:"isDirectBuy"})," to ",(0,i.jsx)(n.code,{children:"true"}),";\nthus, close the auction."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-solidity",children:"if(msg.value >= directBuyPrice){ // If the bid is higher or equal to the direct buy price\n    isDirectBuy = true; // The auction has ended\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:"Next, we have to push the value of the new bid into the bids array."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-solidity",children:"bids.push(Bid(msg.sender,msg.value));\n"})}),"\n",(0,i.jsx)(n.p,{children:"Finally, if there is a previous bid, we have to refund the previous highest bid\nto the previous bidder. Also, we should emit a NewBid event."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-solidity",children:"if(lastHighestBid != 0){ // if there is a bid\n    address(uint160(lastHightestBidder)).transfer(lastHighestBid); // refund the previous bid to the previous highest bidder\n}\n\nemit NewBid(msg.sender,msg.value); // emit a new bid event\n\nreturn true;\n"})}),"\n",(0,i.jsx)(n.p,{children:"Here is the complete function"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-solidity",children:"// Place a bid on the auction\nfunction placeBid() payable external returns(bool){\n    require(msg.sender != creator); // The auction creator can not place a bid\n    require(getAuctionState() == AuctionState.OPEN); // The auction must be open\n    require(msg.value > startPrice); // The bid must be higher than the starting price\n    require(msg.value > maxBid + minIncrement); // The bid must be higher than the current bid + the minimum increment\n\n    address lastHightestBidder = maxBidder; // The address of the last highest bidder\n    uint256 lastHighestBid = maxBid; // The last highest bid\n    maxBid = msg.value; // The new highest bid\n    maxBidder = msg.sender; // The address of the new highest bidder\n    if(msg.value >= directBuyPrice){ // If the bid is higher than the direct buy price\n        isDirectBuy = true; // The auction has ended\n    }\n    bids.push(Bid(msg.sender,msg.value)); // Add the new bid to the list of bids\n\n    if(lastHighestBid != 0){ // if there is a bid\n        address(uint160(lastHightestBidder)).transfer(lastHighestBid); // refund the previous bid to the previous highest bidder\n    }\n\n    emit NewBid(msg.sender,msg.value); // emit a new bid event\n    return true; // The bid was placed successfully\n}\n"})}),"\n",(0,i.jsx)(n.h5,{id:"cancel-auction",children:"Cancel Auction"}),"\n",(0,i.jsx)(n.p,{children:"This is a very simple function. If there are no bids and the auction is open,\nthe auction creator should be able to cancel the auction."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-solidity",children:"function cancelAuction() external returns(bool){ // Cancel the auction\n    require(msg.sender == creator); // Only the auction creator can cancel the auction\n    require(getAuctionState() == AuctionState.OPEN); // The auction must be open\n    require(maxBid == 0); // The auction must not be cancelled if there is a bid\n    isCancelled = true; // The auction has been cancelled\n    _nft.transferFrom(address(this), creator, tokenId); // Transfer the NFT token to the auction creator\n    emit AuctionCanceled(); // Emit Auction Canceled event\n    return true;\n}\n"})}),"\n",(0,i.jsx)(n.h5,{id:"withdraw-token",children:"Withdraw Token"}),"\n",(0,i.jsxs)(n.p,{children:["After the auction has been completed, the highest bidder should be able to\nwithdraw the NFT token. The ",(0,i.jsx)(n.code,{children:"msg.sender"})," must be the highest bidder and the\nauction must be completed by either direct buy or timeout, otherwise the\nfunction must revert. After that, The NFT with the token id ",(0,i.jsx)(n.code,{children:"tokenId"})," will be\ntransferred to the highest bidder."]}),"\n",(0,i.jsx)(n.p,{children:"We've set the max bidder initial value to the auction creator's wallet address,\nso if the auction times out and no one bids, the auction creator will be able to\nwithdraw the token."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-solidity",children:"// Withdraw the token after the auction is over\nfunction withdrawToken() external returns(bool){\n    require(getAuctionState() == AuctionState.ENDED || getAuctionState() == AuctionState.DIRECT_BUY); // The auction must be ended by either a direct buy or timeout\n    require(msg.sender == maxBidder); // The highest bidder can only withdraw the token\n    _nft.transferFrom(address(this), maxBidder, tokenId); // Transfer the token to the highest bidder\n    emit WithdrawToken(maxBidder); // Emit a withdraw token event\n}\n"})}),"\n",(0,i.jsx)(n.h5,{id:"withdraw-funds",children:"Withdraw Funds"}),"\n",(0,i.jsxs)(n.p,{children:["After the auction has been completed, the auction creator should be able to\nwithdraw the funds. The ",(0,i.jsx)(n.code,{children:"msg.sender"})," must be the auction owner and the auction\nmust be completed by either a direct buy or timeout; otherwise, the function\nmust revert. After that, the max bid amount must be transferred to the auction\ncreator."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-solidity",children:"// Withdraw the funds after the auction is over\nfunction withdrawFunds() external returns(bool){\n    require(getAuctionState() == AuctionState.ENDED || getAuctionState() == AuctionState.DIRECT_BUY); // The auction must be ended by either a direct buy or timeout\n    require(msg.sender == creator); // The auction creator can only withdraw the funds\n    address(uint160(msg.sender)).transfer(maxBid);\n    emit WithdrawFunds(msg.sender,maxBid); // Emit a withdraw funds event\n}\n"})}),"\n",(0,i.jsx)(n.h5,{id:"get-all-bids",children:"Get All Bids"}),"\n",(0,i.jsx)(n.p,{children:"We will need a function to get a list of all bids and the bidders."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-solidity",children:"// Returns a list of all bids and addresses\nfunction allBids()\n  external\n  view\n  returns (address[] memory, uint256[] memory)\n{\n    address[] memory addrs = new address[](bids.length);\n    uint256[] memory bidPrice = new uint256[](bids.length);\n    for (uint256 i = 0; i < bids.length; i++) {\n        addrs[i] = bids[i].sender;\n        bidPrice[i] = bids[i].bid;\n    }\n      eturn (addrs, bidPrice);\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Our ",(0,i.jsx)(n.strong,{children:"Auction"})," contract is ready. Here is the complete code:\n",(0,i.jsx)(n.a,{target:"_blank",href:t(59073).Z+"",children:"Auction Contract"})]}),"\n",(0,i.jsx)(n.h2,{id:"auction-manager-contract",children:"Auction Manager Contract"}),"\n",(0,i.jsx)(n.p,{children:"We will use this contract to get a list of all auctions, and to create new ones.\nLet's start with the basic structure."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-solidity",children:'pragma solidity ^0.7.0;\n\nimport "./Auction.sol";\nimport "@openzeppelin/contracts/token/ERC721/IERC721.sol";\n\ncontract AuctionManager {\n    uint _auctionIdCounter; // auction Id counter\n    mapping(uint => Auction) public auctions; // auctions\n\n    function createAuction(uint _endTime, uint _minIncrement, uint _directBuyPrice,uint _startPrice,address _nftAddress,uint _tokenId) external returns (bool) {} // create an auction\n    function getAuctions() external view returns(address[] memory _auctions) {} // Return a list of all auctions\n    function getAuctionInfo(address[] calldata _auctionsList) external view\n      returns (\n            uint256[] memory directBuy,\n            address[] memory owner,\n            uint256[] memory highestBid,\n            uint256[] memory tokenIds,\n            uint256[] memory endTime,\n            uint256[] memory startPrice,\n            uint256[] memory auctionState\n      ) {} // Return the information of each auction address\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"We will need two functions, one for creating an auction and the other one for\ngetting a list of auctions. We will use the counter to assign a unique id for\neach auction so we can keep track of them."}),"\n",(0,i.jsx)(n.h3,{id:"building-the-functions-1",children:"Building the Functions"}),"\n",(0,i.jsx)(n.h4,{id:"create-auction",children:"Create Auction"}),"\n",(0,i.jsx)(n.p,{children:"This is a very straightforward function."}),"\n",(0,i.jsx)(n.p,{children:"First, we need to check that:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Direct buy price is greater than zero."}),"\n",(0,i.jsx)(n.li,{children:"Start price is greater than the direct buy price."}),"\n",(0,i.jsx)(n.li,{children:"End time is greater than 5 minutes, so no one will be able to create an\nauction that lasts few seconds. That wouldn't make sense."}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-solidity",children:"require(_directBuyPrice > 0); // direct buy price must be greater than 0\nrequire(_startPrice < _directBuyPrice); // start price is smaller than direct buy price\nrequire(_endTime > 5 minutes); // end time must be greater than 5 minutes (setting it to 5 minutes\n"})}),"\n",(0,i.jsx)(n.p,{children:"Then, we will create a new Auction contract using the parameters and assign an id to it."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-solidity",children:"uint auctionId = _auctionIdCounter; // get the current value of the counter\n_auctionIdCounter++; // increment the counter\nAuction auction = new Auction(msg.sender, _endTime, _minIncrement, _directBuyPrice, _startPrice, _nftAddress, _tokenId); // create the auction\n"})}),"\n",(0,i.jsx)(n.p,{children:"Finally, we will transfer the NFT token to the newly generated Auction contract\nand update our auctions map."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-solidity",children:"IERC721 _nftToken = IERC721(_nftAddress); // get the nft token\n_nftToken.transferFrom(msg.sender, address(auction), _tokenId); // transfer the token to the auction\nauctions[auctionId] = auction; // add the auction to the map\nreturn true;\n"})}),"\n",(0,i.jsx)(n.p,{children:"See the complete function."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-solidity",children:"// create an auction\nfunction createAuction(uint _endTime, uint _minIncrement, uint _directBuyPrice,uint _startPrice,address _nftAddress,uint _tokenId) external returns (bool){\n    require(_directBuyPrice > 0); // direct buy price must be greater than 0\n    require(_startPrice < _directBuyPrice); // start price is smaller than direct buy price\n    require(_endTime > 5 minutes); // end time must be greater than 5 minutes (setting it to 5 minutes for testing you can set it to 1 days or anything you would like)\n\n    uint auctionId = _auctionIdCounter; // get the current value of the counter\n    _auctionIdCounter++; // increment the counter\n    Auction auction = new Auction(msg.sender, _endTime, _minIncrement, _directBuyPrice, _startPrice, _nftAddress, _tokenId); // create the auction\n    IERC721 _nftToken = IERC721(_nftAddress); // get the nft token\n    _nftToken.transferFrom(msg.sender, address(auction), _tokenId); // transfer the token to the auction\n    auctions[auctionId] = auction; // add the auction to the map\n    return true;\n}\n"})}),"\n",(0,i.jsx)(n.h4,{id:"get-auctions",children:"Get Auctions"}),"\n",(0,i.jsx)(n.p,{children:"This function will iterate over all auctions and return a list of auction addresses."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-solidity",children:"// Return a list of all auctions\nfunction getAuctions() external view returns(address[] memory _auctions) {\n    _auctions = new address[](_auctionIdCounter); // create an array of size equal to the current value of the counter\n    for(uint i = 0; i < _auctionIdCounter; i++) { // for each auction\n        _auctions[i] = address(auctions[i]); // add the address of the auction to the array\n    }\n    return _auctions; // return the array\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:"Then, we can use this list of auctions to display them on the web page. We will\nneed a function to obtain information about the auctions. Given an array of\nauction addresses, we would like to get direct buy price, auction creator,\nstarting price, highest bid, token id, auction state, and the end time."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-solidity",children:"// Return the information of each auction address\nfunction getAuctionInfo(address[] calldata _auctionsList)\n    external\n    view\n    returns (\n        uint256[] memory directBuy,\n        address[] memory owner,\n        uint256[] memory highestBid,\n        uint256[] memory tokenIds,\n        uint256[] memory endTime,\n        uint256[] memory startPrice,\n        uint256[] memory auctionState\n    )\n{\n    directBuy = new uint256[](_auctionsList.length); // create an array of size equal to the length of the passed array\n    owner = new address[](_auctionsList.length); // create an array of size equal to the length of the passed array\n    highestBid = new uint256[](_auctionsList.length);\n    tokenIds = new uint256[](_auctionsList.length);\n    endTime = new uint256[](_auctionsList.length);\n    startPrice = new uint256[](_auctionsList.length);\n    auctionState = new uint256[](_auctionsList.length);\n\n    for (uint256 i = 0; i < _auctionsList.length; i++) { // for each auction\n        directBuy[i] = Auction(auctions[i]).directBuyPrice(); // get the direct buy price\n        owner[i] = Auction(auctions[i]).creator(); // get the owner of the auction\n        highestBid[i] = Auction(auctions[i]).maxBid(); // get the highest bid\n        tokenIds[i] = Auction(auctions[i]).tokenId(); // get the token id\n        endTime[i] = Auction(auctions[i]).endTime(); // get the end time\n        startPrice[i] = Auction(auctions[i]).startPrice(); // get the start price\n        auctionState[i] = uint(Auction(auctions[i]).getAuctionState()); // get the auction state\n    }\n\n    return ( // return the arrays\n        directBuy,\n        owner,\n        highestBid,\n        tokenIds,\n        endTime,\n        startPrice,\n        auctionState\n    );\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Here is the complete code: ",(0,i.jsx)(n.a,{target:"_blank",href:t(66258).Z+"",children:"AuctionManager.sol"})]}),"\n",(0,i.jsx)(n.p,{children:"That's all for the contracts!"}),"\n",(0,i.jsx)(n.h2,{id:"lux-testnet",children:"LUX Testnet"}),"\n",(0,i.jsxs)(n.p,{children:["We are going to test the marketplace on LUX Testnet. First, you need to\nadd LUX Testnet to MetaMask. Open MetaMask and view networks, then click\non ",(0,i.jsx)(n.code,{children:"Custom RPC"}),"."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Networks",src:t(13596).Z+"",width:"408",height:"680"})}),"\n",(0,i.jsx)(n.p,{children:"We will deploy our contracts on Testnet.\nTestnet Settings:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Network Name: Lux Testnet C-Chain"}),"\n",(0,i.jsxs)(n.li,{children:["New RPC URL: ",(0,i.jsx)(n.a,{href:"https://api.lux-test.network/ext/bc/C/rpc",children:"https://api.lux-test.network/ext/bc/C/rpc"})]}),"\n",(0,i.jsx)(n.li,{children:"ChainID: 43113"}),"\n",(0,i.jsx)(n.li,{children:"Symbol: LUX"}),"\n",(0,i.jsxs)(n.li,{children:["Explorer: ",(0,i.jsx)(n.a,{href:"https://testnet.snowtrace.io",children:"https://testnet.snowtrace.io"})]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Next, we will add the network configuration in hardhat config file\n",(0,i.jsx)(n.a,{target:"_blank",href:t(84509).Z+"",children:(0,i.jsx)(n.code,{children:"hardhat.config.js"})}),". If you do not\nknow how that file works then take a look at\n",(0,i.jsx)(n.a,{href:"https://hardhat.org/config/#networks-configuration",children:"here"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'networks:{\n    ...\n    testnet: {\n      url: "https://api.lux-test.network/ext/bc/C/rpc",\n      chainId: 43113,\n      accounts: [\n        "PRIVATE_KEY",\n      ],\n    },\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Lastly, we will need some LUX to deploy our contracts. Use this ",(0,i.jsx)(n.a,{href:"https://faucet.lux.network/",children:"LUX Testnet Faucet\n"})," to get some test LUX for free."]}),"\n",(0,i.jsx)(n.h2,{id:"deploying-the-contracts",children:"Deploying the Contracts"}),"\n",(0,i.jsxs)(n.p,{children:["We need to deploy our ",(0,i.jsx)(n.code,{children:"NFT"})," and ",(0,i.jsx)(n.code,{children:"AuctionManager"})," contracts to the Testnet.\nWe will use hardhat to deploy the contracts, ",(0,i.jsx)(n.a,{href:"https://hardhat.org/guides/deploying.html",children:"learn more about it\nhere"}),". Start by editing the\n",(0,i.jsx)(n.a,{target:"_blank",href:t(98412).Z+"",children:(0,i.jsx)(n.code,{children:"scripts/deploy.js"})})," file."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'const main = async () => {\n  const NftToken = await ethers.getContractFactory("NFT"); // NFT token contract\n  const nftToken = await NftToken.deploy(); // NFT token contract instance\n  await nftToken.deployed(); // wait for contract to be deployed\n  const nftTokenAddress = await nftToken.address; // NFT token contract address\n\n  const AuctionManager = await ethers.getContractFactory("AuctionManager"); // Auction Manager contract\n  const auctionManager = await AuctionManager.deploy(); // Auction Manager contract instance\n  await auctionManager.deployed(); // wait for contract to be deployed\n  const auctionManagerAddress = await auctionManager.address; // Auction Manager contract address\n\n  console.log(`NFT deployed to: ${nftTokenAddress}`); // NFT token contract address\n  console.log(`Auction Manager deployed to: ${auctionManagerAddress}`); // Auction Manager contract address\n};\n\nmain()\n  .then(() => process.exit(0))\n  .catch((error) => {\n    console.error(error);\n    process.exit(1);\n  });\n'})}),"\n",(0,i.jsxs)(n.p,{children:["After you are done editing\n",(0,i.jsx)(n.a,{target:"_blank",href:t(98412).Z+"",children:(0,i.jsx)(n.code,{children:"deploy.js"})}),", execute the following\nlines on your terminal to run the\n",(0,i.jsx)(n.a,{target:"_blank",href:t(98412).Z+"",children:(0,i.jsx)(n.code,{children:"deploy.js"})})," script."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:'npx hardhat compile  # Compiles the contracts\nnpx hardhat run scripts/deploy.js --network testnet # runs the "deploy.js" script on testnet test network, "testnet" is specified inside the hardhat config file\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Pretty simple! If this looks unfamiliar to you, you may want to take a look at ",(0,i.jsx)(n.a,{href:"https://hardhat.org/guides/deploying.html",children:"hardhat guides"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["Do not forget to note the addresses, as we will need them afterward to interact with the contracts.\n",(0,i.jsx)(n.img,{alt:"Deployed",src:t(11827).Z+"",width:"804",height:"65"})]}),"\n",(0,i.jsx)(n.h2,{id:"react-app",children:"React App"}),"\n",(0,i.jsxs)(n.p,{children:["Let's build an interface to interact with our marketplace. We are going to use ",(0,i.jsx)(n.code,{children:"react"})," and ",(0,i.jsx)(n.code,{children:"ether.js"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"Execute the following lines on your terminal to get started."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"create-react-app frontend # creates a react app inside the frontend folder\ncd frontend # go inside the frontend folder\nnpm install --save ethers # install ethers package\nnpm run start # start the react app\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Add bootstrap CDN in the head section of\n",(0,i.jsx)(n.a,{href:"/deprecated/tutorials-contest/2021/NFT-Marketplace-on-Lux/NFT-Marketplace-dApp/frontend/public/index-html",children:(0,i.jsx)(n.code,{children:"public/index.html"})}),"\nfile. We will use bootstrap to speed up."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:'<head>\n  ...\n+  <link\n+    rel="stylesheet"\n+    href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"\n+  />\n</head>\n...\n</body>\n+ <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"><\/script>\n+ <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"><\/script>\n+ <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"><\/script>\n</html>\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Start with a fresh ",(0,i.jsx)(n.a,{href:"/deprecated/tutorials-contest/2021/NFT-Marketplace-on-Lux/NFT-Marketplace-dApp/frontend/src/App.js",children:(0,i.jsx)(n.code,{children:"App.js"})})," file.\nImport the ",(0,i.jsx)(n.code,{children:"ethers"})," library and assign the contract addresses to constant\nstrings."]}),"\n",(0,i.jsx)(n.p,{children:"Since there aren't any auctions yet, we need to create one first. However,\nbefore creating an auction, we need to mint an NFT."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'import React from "react";\nimport { ethers } from "ethers";\nconst NFT_ADDRESS = "0xeb2283672cf716fF6A1d880436D3a9074Ba94375"; // NFT contract address\nconst AUCTIONMANAGER_ADDRESS = "0xea4b168866E439Db4A5183Dbcb4951DCb5437f1E"; // AuctionManager contract address\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      auctions: [], // Auctions to display\n      newAuction: {\n        // newAuction is a state variable for the form\n        startPrice: null,\n        endTime: null,\n        tokenId: null,\n        minIncrement: null,\n        directBuyPrice: null,\n      },\n      myItems: [],\n    };\n  }\n  render() {\n    return (\n      <div>\n        <div class="jumbotron d-flex align-items-center">\n          <div class="container">\n            <div class="auctions row"></div>\n          </div>\n        </div>\n        <div class="container">\n          <form>\n            <button type="submit" class="btn btn-primary">\n              Create Auction\n            </button>\n          </form>\n          <button class="btn btn-fanger">Mint NFT</button>\n          <p>\n            Your items\n            <br />\n            {(this.state.myItems || [""]).map((x) => `id: ${x} `) || ""}\n          </p>\n        </div>\n      </div>\n    );\n  }\n}\nexport default App;\n'})}),"\n",(0,i.jsx)(n.h2,{id:"building-the-form",children:"Building the Form"}),"\n",(0,i.jsx)(n.p,{children:"We need to add few elements to our form. The user has to type in the start\nprice, token id, minimum increment, how many minutes the auction will last and\nthe direct buy price."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'<form>\n  <div class="mb-3">\n    <label for="startprice" class="form-label">\n      Start Price\n    </label>\n    <input\n      value={this.state.newAuction.startPrice}\n      onChange={(e) =>\n        this.setState({\n          newAuction: {\n            ...this.state.newAuction,\n            startPrice: parseInt(e.target.value),\n          },\n        })\n      }\n      type="number"\n      class="form-control"\n      id="startprice"\n    />\n    <label for="startprice" class="form-label">\n      Token Id\n    </label>\n    <input\n      value={this.state.newAuction.tokenId}\n      onChange={(e) =>\n        this.setState({\n          newAuction: {\n            ...this.state.newAuction,\n            tokenId: parseInt(e.target.value),\n          },\n        })\n      }\n      type="number"\n      class="form-control"\n      id="startprice"\n    />\n    <label class="form-label">Minimum Increment</label>\n    <input\n      value={this.state.newAuction.minIncrement}\n      onChange={(e) =>\n        this.setState({\n          newAuction: {\n            ...this.state.newAuction,\n            minIncrement: parseInt(e.target.value),\n          },\n        })\n      }\n      type="number"\n      class="form-control"\n    />\n    <label class="form-label">Direct Buy Price</label>\n    <input\n      value={this.state.newAuction.directBuyPrice}\n      onChange={(e) =>\n        this.setState({\n          newAuction: {\n            ...this.state.newAuction,\n            directBuyPrice: parseInt(e.target.value),\n          },\n        })\n      }\n      type="number"\n      class="form-control"\n    />\n\n    <label class="form-label">Duration In Minutes</label>\n    <input\n      value={this.state.newAuction.endTime}\n      onChange={(e) =>\n        this.setState({\n          newAuction: {\n            ...this.state.newAuction,\n            endTime: parseInt(e.target.value),\n          },\n        })\n      }\n      type="number"\n      class="form-control"\n    />\n  </div>\n\n  <button\n    type="button"\n    onClick={() => console.log(this.state.newAuction)}\n    class="btn btn-primary"\n  >\n    Create Auction\n  </button>\n</form>\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Create Auction",src:t(37860).Z+"",width:"1426",height:"714"})}),"\n",(0,i.jsx)(n.p,{children:"Our form is ready! Let's see how we are going to interact with the contracts."}),"\n",(0,i.jsx)(n.h2,{id:"interacting-with-contracts",children:"Interacting with Contracts"}),"\n",(0,i.jsx)(n.h3,{id:"contract-abis",children:"Contract ABIs"}),"\n",(0,i.jsxs)(n.p,{children:["We will use Contract Application Binary Interface (ABI) to interact with the\ncontracts. It is the standard way to do it. You can find the ",(0,i.jsx)(n.code,{children:"ABI"})," of the\ncompiled contracts in ",(0,i.jsx)(n.code,{children:"artifacts/contracts/ContractName/ContractName.json"})," file.\nCreate a ",(0,i.jsx)(n.code,{children:"frontend/src/artifacts"})," folder and move all those ",(0,i.jsx)(n.code,{children:"json"})," files there\nto reach them easier within the React code."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.strong,{children:["If you can not find the json files try running ",(0,i.jsx)(n.code,{children:"npx hardhat compile"})," on your terminal"]})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:'mkdir frontend/src/artifacts # creates a folder named "artifacts" inside the "src" folder of your React app\nmv artifacts/contracts/Auction.sol/Auction.json frontend/src/artifacts/Auction.json # Moves Auction.json to the newly created folder.\nmv artifacts/contracts/NFT.sol/NFT.json frontend/src/artifacts/NFT.json # Moves NFT.json to the newly created folder.\nmv artifacts/contracts/AuctionManager.sol/AuctionManager.json frontend/src/artifacts/AuctionManager.json # Moves AuctionManager.json to the newly created folder.\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Import them in the React code at the top of ",(0,i.jsx)(n.a,{href:"/deprecated/tutorials-contest/2021/NFT-Marketplace-on-Lux/NFT-Marketplace-dApp/frontend/src/App.js",children:"App.js"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'import AuctionArtifact from "./artifacts/Auction.json";\nimport AuctionManagerArtifact from "./artifacts/AuctionManager.json";\nimport NFTArtifact from "./artifacts/NFT.json";\n'})}),"\n",(0,i.jsx)(n.h3,{id:"detecting-and-connecting-to-metamask",children:"Detecting and Connecting to MetaMask"}),"\n",(0,i.jsxs)(n.p,{children:["Add an ",(0,i.jsx)(n.code,{children:"init"})," function which we will call when the page is loaded."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"class App extends React.Component {\n  async init(){}\n...\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["We will use ",(0,i.jsx)(n.a,{href:"https://docs.ethers.io/v5/",children:"Ethers"})," to connect our MetaMask wallet\nand call the ",(0,i.jsx)(n.code,{children:"init"})," function on ",(0,i.jsx)(n.code,{children:"componentDidMount"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'class App extends React.Component {\n  ...\n  async init() {\n    if (window.ethereum) {\n      await window.ethereum.enable(); // Enable the Ethereum client\n      this.provider = new ethers.providers.Web3Provider(window.ethereum); // A connection to the Ethereum network\n      this.signer = this.provider.getSigner(); // Holds your private key and can sign things\n      this.setState({ currentAddress: this.signer.getAddress() }); // Set the current address\n      this._auctionManager = new ethers.Contract( // We will use this to interact with the AuctionManager\n        AUCTIONMANAGER_ADDRESS,\n        AuctionManagerArtifact.abi,\n        this.signer\n      );\n\n      this._nft = new ethers.Contract( // We will use this to interact with the NFT contract\n        NFT_ADDRESS,\n        NFTArtifact.abi,\n        this.signer\n      );\n    } else {\n      alert("No wallet detected");\n    }\n  }\n  componentDidMount() {\n    this.init();\n  }\n  ...\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"Inside the init function we are creating instances of the signer, auction\nmanager contract and our NFT contract. We will use them later."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.a,{href:"https://docs.ethers.io/v5/getting-started/",children:"Take a look at here to learn more about Ethers."}),"\nRefresh the page now, MetaMask should prompt you to connect your account."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.img,{alt:"Choose account",src:t(94314).Z+"",width:"348",height:"641"}),"\n",(0,i.jsx)(n.img,{alt:"Choose account next",src:t(24451).Z+"",width:"354",height:"639"})]}),"\n",(0,i.jsx)(n.p,{children:"Choose your account and continue.\nCongrats! We have connected MetaMask to our website."}),"\n",(0,i.jsx)(n.h2,{id:"minting-an-nft",children:"Minting an NFT"}),"\n",(0,i.jsxs)(n.p,{children:["Let's build the mint function, which we will call when the ",(0,i.jsx)(n.code,{children:"Mint NFT"})," button is pressed."]}),"\n",(0,i.jsxs)(n.p,{children:["We are going to use the ",(0,i.jsx)(n.code,{children:"this.nft"})," object which we created inside the init\nfunction earlier. There is a function named ",(0,i.jsx)(n.code,{children:"getItem()"})," inside our NFT contract.\nWe have to call it and pass 0.5 LUX to mint an NFT."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'async mint() {\n  // hash is the hash of the transaction\n  let { hash } = await this._nft.getItem({\n    // Calling the getItem function of the contract\n    value: ethers.utils.parseEther("0.5"), // 0.5 LUX\n  });\n  console.log("Transaction sent! Hash:", hash);\n  await this.provider.waitForTransaction(hash); // Wait till the transaction is mined\n  console.log("Transaction mined!");\n  alert(`Transaction sent! Hash: ${hash}`);\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"Call this function when the button is pressed."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'<button type="button" onClick={() => this.mint()} class="btn btn-danger">\n  Mint NFT\n</button>\n'})}),"\n",(0,i.jsx)(n.p,{children:"Then click the Mint NFT button on the web page."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Confirm transaction",src:t(71852).Z+"",width:"353",height:"636"})}),"\n",(0,i.jsx)(n.p,{children:"Confirm the transaction. After a few seconds the transaction should get mined."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Transaction mined",src:t(75048).Z+"",width:"448",height:"175"})}),"\n",(0,i.jsx)(n.p,{children:"Congrats! We have just minted ourselves an NFT token! I will mint myself two\nmore. You can do as many as you want!"}),"\n",(0,i.jsx)(n.h2,{id:"owned-nfts",children:"Owned NFT's"}),"\n",(0,i.jsxs)(n.p,{children:["We will use the ",(0,i.jsx)(n.code,{children:"myItems"})," function in the NFT contract to retrieve a list of tokens that we own."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"async getItems() {\n  let items = await this._nft.myItems(); // Get the tokens owned by the user\n  console.log(items);\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Call this function at the end of the ",(0,i.jsx)(n.code,{children:"init()"})," function, so each time the wallet\nis connected, we will retrieve the list of items owned by that wallet."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:'  async init() {\n    if (window.ethereum) {\n      // if window.ethereum is defined\n      await window.ethereum.enable(); // Enable the Ethereum client\n      this.provider = new ethers.providers.Web3Provider(window.ethereum); // A connection to the Ethereum network\n      this.signer = this.provider.getSigner(); // Holds your private key and can sign things\n\n      this._auctionManager = new ethers.Contract( // We will use this to interact with the AuctionManager\n        AUCTIONMANAGER_ADDRESS,\n        AuctionManagerArtifact.abi,\n        this.signer\n      );\n\n      this._nft = new ethers.Contract( // We will use this to interact with the NFT\n        NFT_ADDRESS,\n        NFTArtifact.abi,\n        this.signer\n      );\n\n+     this.getItems();\n    } else {\n      alert("No wallet detected"); // No wallet detected\n    }\n  }\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Big numbers on console",src:t(34346).Z+"",width:"296",height:"191"})}),"\n",(0,i.jsxs)(n.p,{children:["If you reload the page and take a look at the developer console, you may notice\nthat the array contains values in ",(0,i.jsx)(n.code,{children:"BigNumber"})," format. We have to convert them to\nnormal numbers."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"async getItems() {\n  let items = await this._nft.myItems(); // Get the tokens owned by the user\n  items = items.map((x) => x.toNumber()); // Converts BigNumber to number for each item in array\n  this.setState({ myItems: items });\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:"Now refresh the page."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Owned NFT&#39;s",src:t(58881).Z+"",width:"981",height:"678"})}),"\n",(0,i.jsx)(n.p,{children:"Here they are! I can see all the NFT's I've minted."}),"\n",(0,i.jsx)(n.h2,{id:"creating-an-auction",children:"Creating an Auction"}),"\n",(0,i.jsxs)(n.p,{children:["So far, so good! Let's build a function for creating auctions.\nBefore calling the ",(0,i.jsx)(n.code,{children:"createAuction"})," function in the auction manager, first, we\nhave to give approval for the token that we are going to auction. Giving\napproval to the auction manager will let the auction manager transfer our token\nto the newly created auction contract."]}),"\n",(0,i.jsx)(n.p,{children:"Here are the steps."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Check if there are any empty text fields."}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'if (\n  !this.state.newAuction.minIncrement ||\n  !this.state.newAuction.directBuyPrice ||\n  !this.state.newAuction.startPrice ||\n  !this.state.newAuction.endTime ||\n  !this.state.newAuction.tokenId\n)\n  return alert("Fill all the fields");\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["We call the ",(0,i.jsx)(n.code,{children:"approve"})," function of the NFT contract to approve the\n",(0,i.jsx)(n.code,{children:"AuctionManager"})," contract to transfer the NFT token that we are going to put\nup for auction."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'let { hash: allowance_hash } = await this._nft.approve(\n  AUCTIONMANAGER_ADDRESS,\n  this.state.newAuction.tokenId\n); // Approve the AUCTIONMANAGER to transfer the token\nconsole.log("Approve Transaction sent! Hash:", allowance_hash);\nawait this.provider.waitForTransaction(allowance_hash); // Wait till the transaction is mined\nconsole.log("Transaction mined!");\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Then, we will call the ",(0,i.jsx)(n.code,{children:"createAuction"})," function in the ",(0,i.jsx)(n.code,{children:"AuctionManager"})," contract."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'let { hash } = await this._auctionManager.createAuction(\n  this.state.newAuction.endTime * 60, // Converting minutes to seconds\n  ethers.utils.parseEther(this.state.newAuction.minIncrement.toString()), // Minimum increment in LUX\n  ethers.utils.parseEther(this.state.newAuction.directBuyPrice.toString()), // Direct buy price in LUX\n  ethers.utils.parseEther(this.state.newAuction.startPrice.toString()), // Start price in LUX\n  NFT_ADDRESS, // The address of the NFT token\n  this.state.newAuction.tokenId // The id of the token\n);\nconsole.log("Transaction sent! Hash:", hash);\nawait this.provider.waitForTransaction(hash); // Wait till the transaction is mined\nconsole.log("Transaction mined!");\nalert(`Transaction sent! Hash: ${hash}`);\n'})}),"\n",(0,i.jsx)(n.p,{children:"Final function"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'async createAuction() {\n    if (\n      !this.state.newAuction.minIncrement ||\n      !this.state.newAuction.directBuyPrice ||\n      !this.state.newAuction.startPrice ||\n      !this.state.newAuction.endTime ||\n      !this.state.newAuction.tokenId\n    )\n      return alert("Fill all the fields");\n\n    let { hash: allowance_hash } = await this._nft.approve(\n      AUCTIONMANAGER_ADDRESS,\n      this.state.newAuction.tokenId\n    ); // Approve the AUCTIONMANAGER to transfer the token\n    console.log("Approve Transaction sent! Hash:", allowance_hash);\n    await this.provider.waitForTransaction(allowance_hash); // Wait till the transaction is mined\n    console.log("Transaction mined!");\n\n    let { hash } = await this._auctionManager.createAuction(\n      // Create an auction\n      this.state.newAuction.endTime * 60, // Converting minutes to seconds\n      ethers.utils.parseEther(this.state.newAuction.minIncrement.toString()), // Minimum increment in LUX\n      ethers.utils.parseEther(this.state.newAuction.directBuyPrice.toString()), // Direct buy price in LUX\n      ethers.utils.parseEther(this.state.newAuction.startPrice.toString()), // Start price in LUX\n      NFT_ADDRESS, // The address of the NFT token\n      this.state.newAuction.tokenId // The id of the token\n    );\n    console.log("Transaction sent! Hash:", hash);\n    await this.provider.waitForTransaction(hash); // Wait till the transaction is mined\n    console.log("Transaction mined!");\n    alert(`Transaction sent! Hash: ${hash}`);\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Call this function when the ",(0,i.jsx)(n.code,{children:"Create Auction"})," button is pressed."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:'...\n<button\n  type="button"\n+ onClick={() => this.createAuction()}\n  class="btn btn-primary"\n>\n  Create Auction\n</button>\n...\n'})}),"\n",(0,i.jsxs)(n.p,{children:["We are ready to start our first auction! Fill the form and press on ",(0,i.jsx)(n.code,{children:"Create Auction"})," button."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Create auction form",src:t(71954).Z+"",width:"976",height:"478"})}),"\n",(0,i.jsx)(n.p,{children:"Approve the auction manager contract to transfer the NFT token with ID 2."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Approve NFT",src:t(46387).Z+"",width:"360",height:"643"})}),"\n",(0,i.jsx)(n.p,{children:"Start the auction!"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Start auction",src:t(86189).Z+"",width:"358",height:"640"})}),"\n",(0,i.jsx)(n.p,{children:"That's it, we have just started our first auction on our NFT marketplace."}),"\n",(0,i.jsx)(n.h2,{id:"getting-the-list-of-auctions",children:"Getting the List of Auctions"}),"\n",(0,i.jsx)(n.p,{children:"Let's build a function to get a list of all auctions."}),"\n",(0,i.jsxs)(n.p,{children:["We will use two functions from our ",(0,i.jsx)(n.code,{children:"AuctionManager"})," contract to achieve this, ",(0,i.jsx)(n.code,{children:"getAuctions()"})," and ",(0,i.jsx)(n.code,{children:"getAuctionInfo()"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["By calling the ",(0,i.jsx)(n.code,{children:"getAuctions()"})," function, we will get a list of contract\naddresses of all the auctions on the marketplace. Next, we will call the\n",(0,i.jsx)(n.code,{children:"getAuctionInfo()"})," function and pass an array of auction addresses that we would\nlike to obtain information."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'async getAuctions() {\n  let auctionsAddresses = await this._auctionManager.getAuctions(); // get a list of auction addresses\n  let auctions = await this._auctionManager.getAuctionInfo(auctionsAddresses); // I\'ll just pass all the addresses here, you can build a pagination system if you want\n  console.log("Auctions:", auctions);\n  this.setState({ auctions }); // Update the state\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["We should call this function at the end of the ",(0,i.jsx)(n.code,{children:"init()"})," function."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"  ...\n  this._nft = new ethers.Contract(NFT_ADDRESS, NFTArtifact.abi, this.signer); // We will use this to interact with the NFT\n  this.getItems();\n+ this.getAuctions();\n  ...\n"})}),"\n",(0,i.jsx)(n.p,{children:"Now, take a look at the developer console logs."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Big numbers on console",src:t(55114).Z+"",width:"727",height:"417"})}),"\n",(0,i.jsxs)(n.p,{children:["The numbers are again in big number format. We can convert the ",(0,i.jsx)(n.code,{children:"tokenId"})," and\n",(0,i.jsx)(n.code,{children:"endTime"})," using ",(0,i.jsx)(n.code,{children:".toNumber()"})," method; however, for the ",(0,i.jsx)(n.code,{children:"BigNumber"}),"s that\nrepresent a price, we should use ",(0,i.jsx)(n.code,{children:"ethers.utils.formatEther"})," to get the exact\nvalue in LUX."]}),"\n",(0,i.jsx)(n.p,{children:"We should organize the auction array and display them in the auctions section of the web page."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"let new_auctions = [];\n\nfor (let i = 0; i < auctions.endTime.length; i++) {\n  let endTime = auctions.endTime[i].toNumber();\n  let tokenId = auctions.tokenIds[i].toNumber();\n  let auctionState = auctions.auctionState[i].toNumber();\n\n  let startPrice = ethers.utils.formatEther(auctions.startPrice[i]);\n  let directBuyPrice = ethers.utils.formatEther(auctions.directBuy[i]);\n  let highestBid = ethers.utils.formatEther(auctions.highestBid[i]);\n\n  let owner = auctions.owner[i];\n\n  let newAuction = {\n    endTime: endTime,\n    startPrice: startPrice,\n    owner: owner,\n    directBuyPrice: directBuyPrice,\n    tokenId: tokenId,\n    highestBid: highestBid,\n    auctionState: auctionState,\n    auctionAddress: auctionsAddresses[i],\n  };\n  new_auctions.push(newAuction);\n}\n\nthis.setState({ auctions: new_auctions }); // Update the state\n"})}),"\n",(0,i.jsx)(n.p,{children:"Now we will write a function to display an auction on the UI."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'renderAuctionElement(auction) {\n  let state = "";\n  if (auction.auctionState === 0) {\n    state = "Open";\n  }\n  if (auction.auctionState === 1) {\n    state = "Cancelled";\n  }\n  if (auction.auctionState === 2) {\n    state = "Ended";\n  }\n  if (auction.auctionState === 3) {\n    state = "Direct Buy";\n  }\n  return (\n    <div style={{ background: "yellow" }} class="col">\n      <p>ID: {auction.tokenId}</p> {/* ID of the token */}\n      <p>Highest Bid: {auction.highestBid || 0}</p>\n      {/* Highest bid */}\n      <p>Direct Buy: {auction.directBuyPrice}</p> {/* Direct buy price */}\n      <p>Starting Price: {auction.startPrice}</p> {/* Starting price */}\n      <p>Owner: {auction.owner}</p> {/* Owner of the token */}\n      <p>\n        End Time: {Math.round((auction.endTime * 1000 - Date.now()) / 1000 / 60)}{" "}\n        {/* Time left in minutes */}\n        minutes\n      </p>\n      <p>Auction State: {state}</p>\n      <button class="btn-primary">See More</button>\n    </div>\n  );\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["We have converted the ",(0,i.jsx)(n.code,{children:"auction.endTime"}),", which is in seconds, to milliseconds by\nmultiplying by 1000. Then, we have subtracted the result from ",(0,i.jsx)(n.code,{children:"Date.now()"}),",\nwhich is in milliseconds. After that, we divided the result by 1000 to convert\nit to seconds. Finally, we divided it by 60 to convert it to minutes."]}),"\n",(0,i.jsxs)(n.p,{children:["Next, we will map all the auctions into the function in our ",(0,i.jsx)(n.code,{children:"render"})," method."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'render() {\n  return (\n    <div class="jumbotron d-flex align-items-center">\n      <div class="container">\n        <div class="auctions row">\n            {this.state.auctions.map(this.renderAuctionElement)}\n        </div>\n      </div>\n    </div>\n  )\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"Let's see the result!"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Our first auction displayed on the web page",src:t(55124).Z+"",width:"1025",height:"927"})}),"\n",(0,i.jsx)(n.p,{children:"Awesome! There is the auction we've just created."}),"\n",(0,i.jsx)(n.h2,{id:"building-the-auction-page",children:"Building the Auction Page"}),"\n",(0,i.jsxs)(n.p,{children:["We'll use a state variable ",(0,i.jsx)(n.code,{children:"this.state.activeAuction"})," to display the current\nauction. We will set this variable when the ",(0,i.jsx)(n.code,{children:"See More"})," button is pressed. If\nthis variable is not null, the auction information will be rendered instead of\nthe list of auctions. We will set this variable back to null by using a go-back\nbutton."]}),"\n",(0,i.jsxs)(n.p,{children:["This is not a good practice to do it this way, you should probably use ",(0,i.jsx)(n.a,{href:"https://reactnavigation.org/",children:"React\nNavigation"}),", but since this is just a demo, we are\ndoing it this way."]}),"\n",(0,i.jsxs)(n.p,{children:["Add a new ",(0,i.jsx)(n.code,{children:"setActiveAuction"})," function"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"setActiveAuction(auction) {\n  this.setState({ activeAuction: auction });\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:"It will call the function when the button is pressed."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'  ...\n  <p>Auction State: {state}</p>\n  <button class="btn-primary" onClick={() => this.setActiveAuction(auction)}>See More</button>\n</div>\n...\n'})}),"\n",(0,i.jsxs)(n.p,{children:["We would like to display the previous bids for a specific auction. Let's fetch\nthat data when the ",(0,i.jsx)(n.code,{children:"setActiveAuction"})," is called."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"async setActiveAuction(auction) {\n  this._auction = new ethers.Contract( // Create a new instance of the contract\n    auction.auctionAddress,\n    AuctionArtifact.abi,\n    this.signer\n  );\n\n  let previousBids = await this._auction.allBids(); // Get the bids\n  let bids = []; // A list of bids\n  for (let i = 0; i < previousBids[0].length; i++) { // Loop through the bids\n    bids.push({ // Add the bid to the list\n      bidder: previousBids[0][i], // The bidder\n      bid: ethers.utils.formatEther(previousBids[1][i]), // The bid\n    });\n  }\n\n  auction.bids = bids; // Add the bids array to the auction object\n\n  this.setState({ activeAuction: auction }); // Update the state\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Later, we will use the ",(0,i.jsx)(n.code,{children:"this._auction"})," to interact with the auction contract.\nThat's why we have made it accessible from ",(0,i.jsx)(n.code,{children:"this"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"Do you remember that we have assigned a random value to every minted NFT? Let's\nalso display that value on the auction page."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"let auctionTokenValue = await this._nft.itemValue(auction.tokenId); // Get the value of the token\nauctionTokenValue = auctionTokenValue.toNumber(); // Convert BigNumber to number\nauction.auctionTokenValue = auctionTokenValue; // Add the value of the token to the auction object\n"})}),"\n",(0,i.jsx)(n.p,{children:"We should also know who is the highest bidder."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"let highestBidder = await this._auction.maxBidder(); // Get the highest bidder\nauction.highestBidder = highestBidder; // Add the highest bidder to the auction object\n"})}),"\n",(0,i.jsx)(n.p,{children:"Lastly, the minimum increment value."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"let minIncrement = await this._auction.minIncrement(); // Get the minimum increment\nauction.minIncrement = ethers.utils.formatEther(minIncrement); // Add the minimum increment to the auction object\n"})}),"\n",(0,i.jsx)(n.p,{children:"Here is the complete function."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"async setActiveAuction(auction) {\n  console.log(auction);\n  this._auction = new ethers.Contract( // Create a new instance of the contract\n    auction.auctionAddress,\n    AuctionArtifact.abi,\n    this.signer\n  );\n\n  let previousBids = await this._auction.allBids(); // Get the bids\n  let bids = []; // A list of bids\n  for (let i = 0; i < previousBids[0].length; i++) {\n    // Loop through the bids\n    bids.push({\n      // Add the bid to the list\n      bidder: previousBids[0][i], // The bidder\n      bid: ethers.utils.formatEther(previousBids[1][i]), // The bid\n    });\n  }\n\n  auction.bids = bids; // Add the bids array to the auction object\n\n  let auctionTokenValue = await this._nft.itemValue(auction.tokenId); // Get the value of the token\n  auctionTokenValue = auctionTokenValue.toNumber(); // Convert BigNumber to number\n  auction.auctionTokenValue = auctionTokenValue; // Add the value of the token to the auction object\n\n  let highestBidder = await this._auction.maxBidder(); // Get the highest bidder\n  auction.highestBidder = highestBidder; // Add the highest bidder to the auction object\n\n  let minIncrement = await this._auction.minIncrement(); // Get the minimum increment\n  auction.minIncrement = ethers.utils.formatEther(minIncrement); // Add the minimum increment to the auction object\n\n  this.setState({ activeAuction: auction }); // Update the state\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"rendering-the-selected-auction",children:"Rendering the Selected Auction"}),"\n",(0,i.jsx)(n.p,{children:"We will write a simple render function for the selected auction."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'renderActiveAuction() {\n  let activeAuction = this.state.activeAuction;\n  let state = "";\n  if (activeAuction.auctionState === 0) { // If the auction is open\n    state = "Open";\n  }\n  if (activeAuction.auctionState === 1) { // If the auction is cancelled\n    state = "Cancelled";\n  }\n  if (activeAuction.auctionState === 2) { // If the auction is ended\n    state = "Ended";\n  }\n  if (activeAuction.auctionState === 3) { // If the auction is ended by a direct buy\n    state = "Direct Buy";\n  }\n  return (\n    <div>\n      <div class="col">\n        <button\n          class="btn-secondary"\n          onClick={() => this.setState({ activeAuction: null })}\n        >\n          Go Back\n        </button>\n        <p>ID: {activeAuction.tokenId}</p> {/* ID of the token */}\n        <p>Highest Bid: {activeAuction.highestBid || 0} LUX</p>\n        {/* Highest bid */}\n        <p>Direct Buy: {activeAuction.directBuyPrice} LUX</p>{" "}\n        {/* Direct buy price */}\n        <p>Minimum Increment: {activeAuction.minIncrement} LUX</p>{" "}\n        {/* Minimum increment in LUX */}\n        <p>Starting Price: {activeAuction.startPrice} LUX</p> {/* Starting price */}\n        <p>Owner: {activeAuction.owner}</p> {/* Owner of the token */}\n        <p>\n            End Time:{" "}\n            {Math.round(\n              (activeAuction.endTime * 1000 - Date.now()) / 1000 / 60\n            )}{" "}\n            {/* Time left in minutes */}\n            minutes\n        </p>\n        <p>Auction State: {state}</p>\n      </div>\n      <div class="col">\n        <h3>Bids</h3>\n        <table class="table">\n          <thead>\n            <tr>\n              <th>Bidder</th>\n              <th>Bid</th>\n            </tr>\n          </thead>\n          <tbody>\n            {activeAuction.bids.map((bid) => {\n              return (\n                <tr key={bid.bidder}>\n                  <td>{bid.bidder}</td>\n                  <td>{bid.bid} LUX</td>\n                </tr>\n              );\n            })}\n          </tbody>\n        </table>\n      </div>\n      <div class="col">\n        <div>\n          <input type="number" placeholder="0.5" />\n          <button class="btn-primary">Place Pid</button>\n        </div>\n        <button class="btn-danger">Cancel Auction</button>\n        <button class="btn-secondary">Withdraw Funds</button>\n        <button class="btn-secondary">Withdraw Token</button>\n      </div>\n    </div>\n  );\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["If ",(0,i.jsx)(n.code,{children:"this.state.activeAuction"})," is not null, then we will return this function instead of the list of auctions."]}),"\n",(0,i.jsxs)(n.p,{children:["Edit the ",(0,i.jsx)(n.code,{children:"render"})," function"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'...\n<div class="container">\n  {this.state.activeAuction != null ? (\n    this.renderActiveAuction()\n  ) : (\n    <div class="auctions row">\n      {this.state.auctions.map(this.renderAuctionElement)}\n    </div>\n  )}\n</div>\n...\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Auction Page",src:t(27549).Z+"",width:"995",height:"619"})}),"\n",(0,i.jsx)(n.p,{children:"Now, we will have to make those buttons at the bottom functional.\nLet's write a function for each one!"}),"\n",(0,i.jsx)(n.h2,{id:"auction-functions",children:"Auction Functions"}),"\n",(0,i.jsxs)(n.p,{children:["Remember the ",(0,i.jsx)(n.code,{children:"this._auction"})," object we've set inside the ",(0,i.jsx)(n.code,{children:"setActiveAuction"}),"\nfunction? We will use that object to build our functions."]}),"\n",(0,i.jsx)(n.h3,{id:"placing-bids-1",children:"Placing Bids"}),"\n",(0,i.jsxs)(n.p,{children:["We will simply call the ",(0,i.jsx)(n.code,{children:"placeBid"})," function of the Auction contract and pass some LUX."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"async placeBid(amount) {\n  if (!amount) return;\n  amount = ethers.utils.parseEther(amount.toString()); // Amount in LUX\n  let { hash } = await this._auction.placeBid({ value: amount }); // Place a bid\n  await this.provider.waitForTransaction(hash); // Wait till the transaction is mined\n  alert(`Transaction sent! Hash: ${hash}`); // Show the transaction hash\n  this.setActiveAuction(this.state.activeAuction); // Update the active auction\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:"Next, call this function when the button is pressed."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'...\n  <div>\n    <input\n      type="number"\n      placeholder="0.5"\n      onChange={(e) => this.setState({ bidAmount: e.target.value })}\n    />\n    <button\n      class="btn-primary"\n      onClick={() => this.placeBid(this.state.bidAmount)}\n    >\n      Place Pid\n    </button>\n  </div>\n...\n'})}),"\n",(0,i.jsx)(n.p,{children:"Before placing a bid, we must switch to another account on MetaMask since the\nauction creator cannot place bids. Do not forget to connect the account to the\n1537dapp when you switch your account."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Bid Placed on Auction",src:t(83859).Z+"",width:"1084",height:"676"})}),"\n",(0,i.jsx)(n.p,{children:"We've placed a bid on the auction!\nNow let's wait a bit until the auction is over, then we can withdraw our new\ntoken if no one bids a higher value."}),"\n",(0,i.jsx)(n.h3,{id:"withdraw-token-1",children:"Withdraw Token"}),"\n",(0,i.jsxs)(n.p,{children:["Simply call the ",(0,i.jsx)(n.code,{children:"withdrawToken"})," function of the Auction contract and show an\nalert when the transaction gets mined."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"async withdrawToken() {\n  let { hash } = await this._auction.withdrawToken(); // Withdraw the NFT token\n  await this.provider.waitForTransaction(hash); // Wait till the transaction is mined\n  alert(`Withdrawal Successful! Hash: ${hash}`); // Show the transaction hash\n  window.location.reload(); // Reload the page\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Call this function when the ",(0,i.jsx)(n.code,{children:"Withdraw Token"})," button is pressed."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'...\n<button onClick={()=>this.withdrawToken()} class="btn-secondary">Withdraw Token</button>\n...\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Auction Ended",src:t(32849).Z+"",width:"988",height:"328"})}),"\n",(0,i.jsx)(n.p,{children:"After some time, the auction is finally over, and our bid is still the highest\none. Let's withdraw our new NFT token. Note: It would be nice to hide the end\ntime when the auction is not open."}),"\n",(0,i.jsx)(n.p,{children:"Approving the transaction..."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Withdraw Transaction",src:t(63201).Z+"",width:"356",height:"618"})}),"\n",(0,i.jsx)(n.p,{children:"Refresh the page and we just got our new NFT!"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"New NFT from auction",src:t(70590).Z+"",width:"115",height:"55"})}),"\n",(0,i.jsx)(n.h3,{id:"withdraw-funds-1",children:"Withdraw Funds"}),"\n",(0,i.jsxs)(n.p,{children:["Simply call the ",(0,i.jsx)(n.code,{children:"withdrawFunds"})," function of the Auction contract and show an\nalert when the transaction gets mined."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"async withdrawFunds() {\n  let { hash } = await this._auction.withdrawFunds(); // Withdraw the funds\n  await this.provider.waitForTransaction(hash); // Wait till the transaction is mined\n  alert(`Withdrawal Successful! Hash: ${hash}`); // Show the transaction hash\n  window.location.reload(); // Reload the page\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Call this function when the ",(0,i.jsx)(n.code,{children:"Withdraw Funds"})," button is pressed."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'...\n<button onClick={()=>this.withdrawFunds()} class="btn-secondary">Withdraw Funds</button>\n...\n'})}),"\n",(0,i.jsx)(n.p,{children:"Since the auction is already over, we can switch back to the account in which we\ncreated the auction and withdraw our funds."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Switched to account 1",src:t(97880).Z+"",width:"359",height:"598"})}),"\n",(0,i.jsxs)(n.p,{children:["Then we will click on the ",(0,i.jsx)(n.code,{children:"Withdraw Funds"})," button and confirm the transaction."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Withdraw Funds transaction",src:t(63193).Z+"",width:"358",height:"598"})}),"\n",(0,i.jsx)(n.p,{children:"Awesome! We have just sold an NFT and earned some LUX."}),"\n",(0,i.jsx)(n.h3,{id:"cancel-auction-1",children:"Cancel Auction"}),"\n",(0,i.jsxs)(n.p,{children:["Simply call the ",(0,i.jsx)(n.code,{children:"cancelAuction"})," function of the Auction contract and show an\nalert when the transaction gets mined."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"async cancelAuction() {\n  let { hash } = await this._auction.cancelAuction(); // Cancel the auction\n  await this.provider.waitForTransaction(hash); // Wait till the transaction is mined\n  alert(`Auction Canceled! Hash: ${hash}`); // Show the transaction hash\n  window.location.reload(); // Reload the page\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Call this function when the ",(0,i.jsx)(n.code,{children:"Cancel Auction"})," button is pressed."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'...\n<button onClick={() => this.cancelAuction()} class="btn-danger">\n  Cancel Auction\n</button>\n...\n'})}),"\n",(0,i.jsxs)(n.p,{children:["We have to create a new auction to demonstrate this since we cannot cancel an\nauction that has been bid already. Create a new auction, click on the ",(0,i.jsx)(n.code,{children:"Cancel Auction"})," button and confirm the transaction."]}),"\n",(0,i.jsx)(n.p,{children:"After refreshing the page, we can see that the auction has been canceled."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Canceled Auction",src:t(96159).Z+"",width:"481",height:"319"})}),"\n",(0,i.jsx)(n.p,{children:"We can also see that the token was sent back to use after we've canceled the auction."}),"\n",(0,i.jsx)(n.h2,{id:"polishing-the-buttons",children:"Polishing the Buttons"}),"\n",(0,i.jsxs)(n.p,{children:["If the button is not functional we should hide it. For instance, the ",(0,i.jsx)(n.code,{children:"Withdraw Funds"})," button is visible to all users; however, only the auction creator can\ncall it when the auction is over. Thus, we must only make it visible if the\nauction is over and the user is the auction creator."]}),"\n",(0,i.jsx)(n.p,{children:"We will do some checks for each button and hide the button if the user is not\nable to call the function."}),"\n",(0,i.jsxs)(n.p,{children:["Please note that our contract already blocks the other users from calling\n",(0,i.jsx)(n.code,{children:"Withdraw Funds"})," function. Someone can call any external function of a contract,\neven if it's hidden on the web page. It is crucial to make the checks within the\ncontract code."]}),"\n",(0,i.jsx)(n.p,{children:"We will use some booleans to make this easier."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'renderActiveAuction() {\n    let activeAuction = this.state.activeAuction;\n\n    let isOwner = this.state.currentAddress === activeAuction.owner; // Check if the current address is the owner\n    let isAuctionOpen = state === "Open"; // Check if the auction is open\n    let isAuctionCancelled = state === "Cancelled"; // Check if the auction is cancelled\n    let isAuctionEnded = state === "Ended" || state === "Direct Buy"; // Check if the auction is ended\n    ...\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"place-bid-area",children:"Place Bid Area"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Auction must be open."}),"\n",(0,i.jsx)(n.li,{children:"The auction creator cannot bid."}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'{\n  isAuctionOpen && !isOwner ? (\n    <div>\n      <input\n        type="number"\n        placeholder="0.5"\n        onChange={(e) => this.setState({ bidAmount: e.target.value })}\n      />\n      <button\n        class="btn-primary"\n        onClick={() => this.placeBid(this.state.bidAmount)}\n      >\n        Place Pid\n      </button>\n    </div>\n  ) : null;\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"cancel-auction-button",children:"Cancel Auction Button"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"There must be no bids."}),"\n",(0,i.jsx)(n.li,{children:"Auction must be open."}),"\n",(0,i.jsx)(n.li,{children:"The caller must be the auction creator."}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'{\n  isOwner && isAuctionOpen && activeAuction.bids.length == 0 ? (\n    <button onClick={() => this.cancelAuction()} class="btn-danger">\n      Cancel Auction\n    </button>\n  ) : null;\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"withdraw-funds-button",children:"Withdraw Funds Button"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Auction must be ended."}),"\n",(0,i.jsx)(n.li,{children:"The caller must be the auction creator."}),"\n",(0,i.jsx)(n.li,{children:"There must be at least one bid on the auction."}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'{\n  isOwner && isAuctionEnded && activeAuction.bids.length > 0 ? (\n    <button onClick={() => this.withdrawFunds()} class="btn-secondary">\n      Withdraw Funds\n    </button>\n  ) : null;\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"withdraw-token-button",children:"Withdraw Token Button"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Auction must be ended."}),"\n",(0,i.jsx)(n.li,{children:"If there are any bids, the caller must be the highest bidder."}),"\n",(0,i.jsx)(n.li,{children:"If there are no bids, the caller must be the auction creator. (The auction\ncreator must be able to withdraw the token if no one bids and the auction\ntimes out)"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'{\n  ((activeAuction.bids.length == 0 && isOwner) || isHighestBidder) &&\n  isAuctionEnded ? (\n    <button onClick={() => this.withdrawToken()} class="btn-secondary">\n      Withdraw Token\n    </button>\n  ) : null;\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"See the code for all of the buttons"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'<div class="col">\n  {isAuctionOpen && !isOwner ? (\n    <div>\n      <input\n        type="number"\n        placeholder="0.5"\n        onChange={(e) => this.setState({ bidAmount: e.target.value })}\n      />\n      <button\n        class="btn-primary"\n        onClick={() => this.placeBid(this.state.bidAmount)}\n      >\n        Place Pid\n      </button>\n    </div>\n  ) : null}\n  {isOwner && isAuctionOpen && activeAuction.bids.length == 0 ? (\n    <button onClick={() => this.cancelAuction()} class="btn-danger">\n      Cancel Auction\n    </button>\n  ) : null}\n\n  {isOwner && isAuctionEnded ? (\n    <button onClick={() => this.withdrawFunds()} class="btn-secondary">\n      Withdraw Funds\n    </button>\n  ) : null}\n  {isHighestBidder && isAuctionEnded ? (\n    <button onClick={() => this.withdrawToken()} class="btn-secondary">\n      Withdraw Token\n    </button>\n  ) : null}\n</div>\n'})}),"\n",(0,i.jsx)(n.h2,{id:"finishing-the-react-app",children:"Finishing the React App"}),"\n",(0,i.jsxs)(n.p,{children:["That's all we need to do. Now, we have a functional marketplace where we can\ncreate auctions and sell NFT's. We had an attribute called ",(0,i.jsx)(n.code,{children:"value"})," that is\nassigned randomly to each of the NFT's. We've displayed this attribute on the\nauction page."]}),"\n",(0,i.jsxs)(n.p,{children:["If this were an image or any attribute else instead of an integer, we would\nstill be able to display it by making a simple change in our code. For instance,\nto retrieve the metadata (image URL and other attributes) of an NFT token, use\nthe ",(0,i.jsx)(n.code,{children:"tokenURI(uint256 tokenId)"})," function to get the token URI from the NFT\ncontract. You may want to take a look at\n",(0,i.jsx)(n.a,{href:"https://docs.openzeppelin.com/contracts/3.x/api/token/erc721#IERC721Metadata",children:(0,i.jsx)(n.code,{children:"IERC721Metadata"})}),"\nto learn more about it."]}),"\n",(0,i.jsx)(n.h2,{id:"using-with-other-nft-contracts",children:"Using with Other NFT Contracts"}),"\n",(0,i.jsxs)(n.p,{children:["Selling another NFT instead of creating a contract is possible. As you may have\nnoticed, we have only used the ",(0,i.jsx)(n.code,{children:"approve"})," and ",(0,i.jsx)(n.code,{children:"transferFrom"})," functions to\ntransfer the NFT to our Market Place contract. Those functions are a standard in\nERC-721, so this marketplace is compatible with almost any NFT token."]}),"\n",(0,i.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,i.jsx)(n.p,{children:"There are a couple of things to test and consider before going any further."}),"\n",(0,i.jsx)(n.h2,{id:"tests",children:"Tests"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Does the direct buy working?"}),"\n",(0,i.jsx)(n.li,{children:"Will the auction creator be able to withdraw the token if there are no bids and the auction times out?"}),"\n",(0,i.jsx)(n.li,{children:"Does the minimum increment working correctly?"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Before deploying a contract to production, we should test every possible scenario,\nand it's very hard to do the test one by one on the UI. Instead, we should use\n",(0,i.jsx)(n.a,{href:"https://hardhat.org/tutorial/testing-contracts.html",children:"hardhat tests"}),", where we can create\ndifferent scenarios and test all of them in a matter of seconds."]}),"\n",(0,i.jsx)(n.h2,{id:"things-to-consider",children:"Things to Consider"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["If the user sends more LUX than the direct buy price, it doesn't get refunded.","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Refund the extra LUX if ",(0,i.jsx)(n.code,{children:"msg.value"})," is greater than direct buy price."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["The website won't work if the user doesn't connect a wallet or doesn't have one.","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["To be able to call the view functions, such as getting a list of auctions,\nyou can use a ",(0,i.jsx)(n.code,{children:"provider"}),", ",(0,i.jsx)(n.a,{href:"https://docs.ethers.io/v4/api-providers.html",children:"learn more about it\nhere"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["React App doesn't handle the error when a transaction fails.","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"When the transaction fails, maybe show a pop-up and tell the reason."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"It's always good to give the user clear instructions and make them feel\ncomfortable. You should look from a user's point of view and try to think of\nevery possible scenario & outcome."}),"\n",(0,i.jsx)(n.h2,{id:"deploying-to-the-lux-mainnet",children:"Deploying to the Lux Mainnet"}),"\n",(0,i.jsxs)(n.p,{children:["Deploying to Mainnet is the same as deploying to ",(0,i.jsx)(n.a,{href:"#lux-testnet",children:"Testnet"}),".\nThe only difference is that you have to pay real funds instead of test funds."]}),"\n",(0,i.jsxs)(n.p,{children:["Again, get the configurations for the Lux Mainnet from\n",(0,i.jsx)(n.a,{href:"https://docs.lux.network/build/tutorials/smart-contracts/deploy-a-smart-contract-on-using-remix-and-metamask#mainnet-settings",children:"here"}),"\nand add the network in the hardhat config file\n",(0,i.jsx)(n.a,{target:"_blank",href:t(84509).Z+"",children:(0,i.jsx)(n.code,{children:"hardhat.config.js"})}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'networks:{\n    ...\n    mainnet: {\n      url: "https://api.lux.network/ext/bc/C/rpc",\n      chainId: 43114,\n      accounts: [\n        "PRIVATE_KEY",\n      ],\n    },\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"After that, run the deploy script just like when deploying to the test net."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:'npx hardhat compile # Compiles the contracts\nnpx hardhat run scripts/deploy.js --network mainnet # runs the script on the Lux Mainnet, "mainnet" is specified inside the hardhat config file\n'})}),"\n",(0,i.jsx)(n.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,i.jsx)(n.p,{children:"You now have the basic knowledge to start your NFT Marketplace."}),"\n",(0,i.jsx)(n.p,{children:"Don't forget that the react app is a demonstration of interacting with the contracts\nand fetching data from them. A good marketplace would need a better design and a lot of work."}),"\n",(0,i.jsx)(n.p,{children:"Open an issue if you have any questions."})]})}function l(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},59073:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/files/Auction-5f10fb398cd6f26e6538cf10dc019cfd.sol"},66258:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/files/AuctionManager-312144abbe4ae33ea38437ca9268b476.sol"},12349:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/files/NFT-d64d9037d299485d3f2f9f5f1ad8c4ea.sol"},84509:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/files/hardhat.config-1b309bb8ef132378d72de0a750b73da2.js"},98412:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/files/deploy-3a2f9a7854170b5a99435b503c581b8e.js"},46387:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/nft-marketplace-approvenft-f32e8a791a1189a7c16fc3f42a7fd841.png"},32849:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/nft-marketplace-auction-ended-7713383d3fa7684dd1c9b70d461fda18.png"},27549:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/nft-marketplace-auction-page-964f0f9d3d8779466925863b06d14932.png"},97880:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/nft-marketplace-backtoaccount1-ec663ca3d0495a0676ee52f07b0333b1.png"},83859:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/nft-marketplace-bidplaced-637fb131fd7ae3a8a35bd72518062278.png"},34346:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/nft-marketplace-bignumbers-40c2098b381b13ee6b41152a39478be1.png"},96159:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/nft-marketplace-canceled-19175b89ac4cf640781c2e64d87e831f.png"},24451:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/nft-marketplace-choose-account-next-726da22526a77a0e8116fe8682335e12.png"},94314:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/nft-marketplace-choose-account-6d42d7f00dc88019dc15491d878a7076.png"},71852:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/nft-marketplace-confirm-b3b17e739f55a3e4500bdb6fecfd9664.png"},55114:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/nft-marketplace-consolebig-ef6db18f1d6e7b0e19301982d17af157.png"},37860:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/nft-marketplace-create-auction-ddd521fde107d9f16c84bc6cfe05f9dd.png"},11827:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/nft-marketplace-deployed-1976588664f3f09f30dad1d275bd8a19.png"},75048:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/nft-marketplace-done-3ad94f15bef75268e27e80d2c9b5312e.png"},55124:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/nft-marketplace-first-auction-on-web-page-3ed952128743e6fc75cc79c868fd38e8.png"},71954:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/nft-marketplace-form-864452d8a35180814c839454f5e30455.png"},63193:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/nft-marketplace-fundsback-3009b08490d5506a5b0089ee8cd035e2.png"},13596:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/nft-marketplace-networks-0b5f9354919a6383d080104b6ee11409.png"},70590:(e,n,t)=>{t.d(n,{Z:()=>i});const i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHMAAAA3CAYAAAA/inWcAAAABHNCSVQICAgIfAhkiAAAABl0RVh0U29mdHdhcmUAZ25vbWUtc2NyZWVuc2hvdO8Dvz4AAAAtdEVYdENyZWF0aW9uIFRpbWUAV2VkIDA0IEF1ZyAyMDIxIDAxOjM0OjQxIFBNICswM0ia8hUAAAjKSURBVHic7Zt7VJR1Gsc/oHByBh1ApE5pKi4od5gBlMxbmqR5y1wVuyhhpAY0gLctMy+VXTZLJPDSWom65mKumrfVtFKRs8dL7XbbBBUzgTARh5kBmeG3f6BvToaXmRc55+39nDPnzHzf5/c8zzvf9zLv+/7GTQghUFEE7i3dgIp8qGYqCNVMBaGaqSAUZWZO7jJ6xvfh3C+/tHQrLYJTZhozp9MtKITikpJrlmXn5NItKISv/vNfl5u7VaxWK9ZaK3abHYD9Bw7y0vyFt72PFkM4wYmTp0RgjzAxfeZsB72mxiz0sb3EM1NTnUkrC5cuXZLez1/4qtDH9mqxXm43Tu2ZXbt0ZvSokWzZuo2fzp6V9HV/X0919UUyjOmybWy3ioeHR4vVbmmcPmempU3D3c2NpUtzATDV1LB85XuMGjGc7kGBUtyHq9cw8MEh9AiNZPCQYXy0ocAhz4KXF2GIi3fQtu/cRbegEEpKTgBQUfEzGVkzGfjgEEIj9ETH9GLT5i3X9JS3fCXdgkKw2WySduFCNd2CQqTX+aqqxn5NJubMnYchLp7QCD3JT0/hxx/PSOPOnPmJpOQUevcZQPeQCAxx8aQbs9h/4CApz0wjMjqW8KgYpj6bzi/nz0vjyisqSEvPwBAXT3BYFA8PH8Xx4mJnv+ZborWzA++5+26eemoSy1e8R1LSRLZ+sg2LxUpWllGKeTdvOYvfXkLC4EEkJo7j0KEinp8zl3pbPY9PSLzpWmfLytiy9RNGDB9GcuwkTKYaggIDbzwQ0Go1vLboFemzl5cXdrudpOQUvv3ueyYnJ6HT6chbtpykySns+GQzHh4eVJ47xxf7DzB2zKNERkZQWnqaVR98yLbtO0gYPIjUZ6dSVl7B6vw1eHlpefP1RQDMnPU8xSUlZGY8h6aNhh+OH8fX1/em19UlXDlG19SYRVx8H/HncRNESHi0WPxOtrSs8tw5ERqhF8bMGQ5jnk6ZKgxx8cJsNgshfv+8tm3HThEQGCyKi0uEEEIcPfalCAgMFvsPFF63n9xlK0RAYLCor69vMvfV+Tdt3iJpe/d9LgICg8WevfuarDl/4aviT91DhdVqlTRj5gwRHmWQPkfq48T8ha9et8/mwqVLE61Ww/QsI0eOHkOna8eUlMnSsqKif2O1Whk3dozDmLFjx1BVdYGjx750pbRLFBYeonXr1gx8YAB1dXXU1dURY4gG4Ouvv2lyXHhYKA0NDZSVV0haWFgoZrMFs9kCQFyMgX8UbGR1/lpJu124fJ05ZvQjuLu781DCYNq0aSPpV85N/h06OMT7+/sDSNeC7m5u3O5b/dXVF7HZbETp4wgJjyYkPJooQ8/Ly6qbHKfRaACotVolTXtZs1objXvzjUWMHDGMRa+9wX339+PtJUupr69vrlVxwOlz5hXc3NyuvHPQfX18APi5spKAgK6SXllZCYBf+/YAaL20mEwmGhoacHeX9x5G69atsNsbrtHvuutOPD09WZv/wVX9N/Lbje9qroQKxFVao3hlg9TpdLy8YB7G9FRyl60k5908PD09eXbqMy6uzY1x2cym6NUzljvuuIOCgo/p1TNO0j/aUIC3t47oqCgA7u3UiYaGBg4fOUpcbIysPXh7e2MymTCZTLRt21bSw8JCuXTpEhcvXqR/v76y1ryCn58fc+f8hcOHD3PkyNFmqfFbms1MPz8/pk5J4e13sqmtrSVaH01RURF7933OvJdeRKttPDw9lDCYVxa9TtpzmTw2YTy+vj4cOXJMlh7iezUeOo2ZM+jfvx+nT59mQuJ4hj6UwKpVH5CansGjo0fRLSCA2rpaqqouMGtGlks1Z81+gfCIMHTtdJwqLeX48WJ6975PjtW5Ic1mJkDqtCloNBry89eyZ+8+Ona8h5cXzCNx/FgpRqvVsH5dPi/MmUte3nIE0MHPjwH9+6LTtXOpfnRUJLNnTmfFyr9ReKiILp3vZdjDQ/Ho0pn8D1fx1uIl/Gv3Hs6fr6J9e1/0l48WzlJXV0d5RTm7/robi9WKf4cOJCaOw5ie6lLem8VNCHWmgVJQ1FOTPzqqmQpCNVNBqGYqCNVMBaGaqSBUMxWEaqaCUM1UEM1ups1mw263N3cZFVwwc2LSZBIfe/K6MZ/u+4ywSAM/njlz3TgVeXDaTLPZjMVy/SfpFrPllh7MnjhxktQ0I/rYePSx8Tw5KZlvvv3O2Rb/cDj91GTD+rVy9oHdbufxiUlotVomTXwCIQRr1qxjYlIyu3dux8fHW9Z6SsRpM+WeFdCqVSuy31lMRHgYnp6eAIQE92DKtDQOHCxk+LChstZTIk47Mumppxk7/jEH7Z9btpIwZDjBYVEMShhKwcaPHZZv2ryF8KgYPt332e/mjDHoJSMBunTpDED1xabn5aj8imy7185du8maPgsvLy8yjGkMGvgA33//P4eYU6dKsVgslJaevqmcX+w/CECMwSBXm4pGtpkGS7KX0j0okPXrVkt/EQgNCcGYOV2KSZ02hQH9+xIRHn7DfCUlJ8jOzuGRkSPo0T1IrjYVjSx7Zo3ZzA/Hixk6dMh1/+vh4eFBVGTkDc+3Z8vKSEpOoWOnjiyYP1eOFv8QyGJmeXk5AL6+Pi7nOl9VxZOTknFzd+P991ZIc1VVbowsh1lvnQ6AsrJyl/IIIcjInEFVVRUFG9bj79/0HFaVa5Flz/Tz8yM8LJSNH2/CVFPTZJzNZuPLr76ioeHaickAO3bu4sDBQt5683W6Xv4lq3LzyPYD6MU5zzN+whOMHDWG0aNH4e2to7DwkENMTu4ylubkMueF2SRNvPZWYMHGTdx5pz8Wq5XtO3dJelsvL/rc31uuVhWLbGYa9NGsWf0+S7JzyFu2AiEEvj4+9O/Xl3btGue/3tupExqNhk4dO/5ujpMnT1FR8TNp6RkOeteuXdiza7tcrSoWdd6sglCfZyoI1UwFoZqpIFQzFYRqpoJQzVQQqpkKQjVTQahmKgjVTAWhmqkgVDMVxP8B2qTWlr8i+ukAAAAASUVORK5CYII="},58881:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/nft-marketplace-owned-c4fa86886a8eaee3e70eb7562e447d09.png"},86189:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/nft-marketplace-startauction-199b4ee879a43a5cfa9e8a4eaedadb4a.png"},63201:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/nft-marketplace-withdrawtransaction-confirm-27b188177db29263d5ea4791f3dc72a7.png"},11151:(e,n,t)=>{t.d(n,{Z:()=>c,a:()=>r});var i=t(67294);const s={},a=i.createContext(s);function r(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);