"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[8505],{52838:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>c,contentTitle:()=>i,default:()=>p,frontMatter:()=>d,metadata:()=>s,toc:()=>r});var o=t(85893),a=t(11151);const d={},i="VoteModal.js",s={id:"deprecated/tutorials-contest/2021/evoting-dapp/frontend/VoteModal.js",title:"VoteModal.js",description:"",source:"@site/docs/deprecated/tutorials-contest/2021/evoting-dapp/frontend/VoteModal.js.md",sourceDirName:"deprecated/tutorials-contest/2021/evoting-dapp/frontend",slug:"/deprecated/tutorials-contest/2021/evoting-dapp/frontend/VoteModal.js",permalink:"/deprecated/tutorials-contest/2021/evoting-dapp/frontend/VoteModal.js",draft:!1,unlisted:!1,editUrl:"https://github.com/luxdefi/docs/edit/main/docs/deprecated/tutorials-contest/2021/evoting-dapp/frontend/VoteModal.js.md",tags:[],version:"current",frontMatter:{}},c={},r=[];function l(n){const e={code:"code",h1:"h1",pre:"pre",...(0,a.a)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.h1,{id:"votemodaljs",children:"VoteModal.js"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-jsx",children:'import React, { useState } from "react";\nimport { Box, Flex, Modal, Button, Text, Card, Radio, Field, Loader } from "rimble-ui";\n\n// Data like election and candidate details will be passed in the props by ActiveElections.js (parent)\nfunction VoteModal(props) {\n  // These are React Hooks and are used only for UX like opening and closing of Voting Modal and loaders\n  const [isOpen, setIsOpen] = useState(false);\n  const [loading, isLoading] = useState(false);\n\n  // This Hook will be used to maintain the selected candidate ID by a voter\n  const [cid, changeCid] = useState(0);\n\n  const closeModal = (e) => {\n    e.preventDefault();\n    setIsOpen(false);\n  };\n\n  const openModal = (e) => {\n    e.preventDefault();\n    setIsOpen(true);\n  };\n\n  const onRadioChange = (e) => {\n    changeCid(e.target.value);\n  };\n\n  // vote() function would be used to transact a vote\n  const vote = async (eid) => {\n    isLoading(true);\n    await props.election.contractInstance.methods.vote(cid).send({ from: props.election.account });\n    isLoading(false);\n  };\n\n  let candid = [],\n    candidVote = [];\n  for (let i = 0; i < props.candidates.length; i++) {\n    let candidDetail = props.candidates[i][1] + " (" + props.candidates[i][2] + ")";\n\n    candid.push(\n      <Radio\n        name="candidate"\n        key={i}\n        label={candidDetail}\n        my={2}\n        value={props.candidates[i][0]}\n        onChange={onRadioChange}\n      />\n    );\n\n    candidVote.push(props.candidates[i][2]);\n  }\n\n  return (\n    // This is a rimble-ui builtin modal for triggering vote() function\n    <Box className="App" p={0}>\n      <Box>\n        <Button onClick={openModal}>Vote</Button>\n\n        <Modal isOpen={isOpen}>\n          <Card width={"420px"} p={0}>\n            {/* Close icon to close the modal */}\n            <Button.Text\n              icononly\n              icon={"Close"}\n              color={"moon-gray"}\n              position={"absolute"}\n              top={0}\n              right={0}\n              mt={3}\n              mr={3}\n              onClick={closeModal}\n            />\n\n            {/* List of candidates with their vote count */}\n            <Box p={4} mb={3}>\n              <h3>{props.election.electionName}</h3>\n              <Field label="Choose candidate from below">{candid}</Field>\n            </Box>\n\n            {/* Vote button to cast a vote */}\n            <Flex\n              px={4}\n              py={3}\n              borderTop={1}\n              borderColor={"#E8E8E8"}\n              justifyContent={"flex-end"}\n            >\n              {loading ? (\n                <Loader size="40px" />\n              ) : (\n                <Button.Outline\n                  onClick={() => {\n                    vote(props.election.electionId);\n                  }}\n                >\n                  Vote\n                </Button.Outline>\n              )}\n            </Flex>\n          </Card>\n        </Modal>\n      </Box>\n    </Box>\n  );\n}\n\nexport default VoteModal;\n'})})]})}function p(n={}){const{wrapper:e}={...(0,a.a)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(l,{...n})}):l(n)}},11151:(n,e,t)=>{t.d(e,{Z:()=>s,a:()=>i});var o=t(67294);const a={},d=o.createContext(a);function i(n){const e=o.useContext(d);return o.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(a):n.components||a:i(n.components),o.createElement(d.Provider,{value:e},n.children)}}}]);