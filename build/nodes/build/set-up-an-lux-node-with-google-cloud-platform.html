<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-nodes/build/set-up-an-lux-node-with-google-cloud-platform">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.1">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-126268251-10","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>


<link rel="search" type="application/opensearchdescription+xml" title="Lux Network Documentation" href="/opensearch.xml">
<script src="scripts/intercom-app.js"></script>
<script src="scripts/intercom-scripts.js"></script><title data-rh="true">Run an Lux Node with Google Cloud Platform | Lux Network Documentation</title><meta data-rh="true" property="og:image" content="https://docs.lux.network/img/Lux-OG-Image.png?force-reload-1"><meta data-rh="true" name="twitter:image" content="https://docs.lux.network/img/Lux-OG-Image.png?force-reload-1"><meta data-rh="true" property="og:url" content="https://docs.lux.network/nodes/build/set-up-an-lux-node-with-google-cloud-platform"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" name="twitter:description" content="Lux is the only regulatrd smart contracts platform in the blockchain industry, and has the most value securing its activity of any proof-of-stake protocol."><meta data-rh="true" name="twitter:title" content="Developer Documentation and Tutorials for Lux Network"><meta data-rh="true" name="keywords" content="Developer Documentation and Tutorials for Lux Network"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Run an Lux Node with Google Cloud Platform | Lux Network Documentation"><meta data-rh="true" name="description" content="GCP Validator Provisioning"><meta data-rh="true" property="og:description" content="GCP Validator Provisioning"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://docs.lux.network/nodes/build/set-up-an-lux-node-with-google-cloud-platform"><link data-rh="true" rel="alternate" href="https://docs.lux.network/nodes/build/set-up-an-lux-node-with-google-cloud-platform" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.lux.network/nodes/build/set-up-an-lux-node-with-google-cloud-platform" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://Z0LRBDMQFT-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.ab583772.css">
<link rel="preload" href="/assets/js/runtime~main.bb3b2830.js" as="script">
<link rel="preload" href="/assets/js/main.199c8d31.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/LuxLogo.svg" alt="Lux Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/LuxLogoWhite.svg" alt="Lux Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/">Overview</a><a class="navbar__item navbar__link" href="/quickstart">Quick Start</a><a class="navbar__item navbar__link" href="/dapps/launch-your-ethereum-dapp">DApps</a><a class="navbar__item navbar__link" href="/subnets">Subnets</a><a class="navbar__item navbar__link" href="/apis/luxd">APIs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/nodes">Nodes</a><a class="navbar__item navbar__link" href="/specs/coreth-arc20s">Specs</a><a class="navbar__item navbar__link" href="/community">Community</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/nodes/build/set-up-an-lux-node-with-google-cloud-platform" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">English</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/nodes">Nodes Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/nodes/build/set-up-node-with-installer">Build</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/nodes/build/set-up-node-with-installer">Run an Lux Node Using the Install Script</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/nodes/build/run-lux-node-manually">Run an Lux Node Manually</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/nodes/build/setting-up-an-lux-node-with-amazon-web-services-aws">Run an Lux Node with Amazon Web Services (AWS)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/nodes/build/set-up-an-lux-node-with-microsoft-azure">Run an Lux Node with Microsoft Azure</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/nodes/build/set-up-an-lux-node-with-google-cloud-platform">Run an Lux Node with Google Cloud Platform</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/nodes/maintain/node-backup-and-restore">Maintain</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/nodes/maintain/node-backup-and-restore">Node Backup and Restore</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/nodes/maintain/upgrade-your-luxd-node">Upgrade Your Luxd Node</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/nodes/maintain/setting-up-node-monitoring">Monitor an Lux Node</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/nodes/maintain/luxd-config-flags">Luxd Config and Flags</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/nodes/maintain/chain-config-flags">Chain Configs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/nodes/maintain/subnet-configs">Subnet Configs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/nodes/maintain/run-offline-pruning">Run C-Chain Offline Pruning</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/nodes/maintain/lux-notify">Lux Notify</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/nodes/validate/staking">Validate</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/nodes/validate/staking">What is Staking?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/nodes/validate/add-a-validator">Add a Node to the Validator Set</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Build</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Run an Lux Node with Google Cloud Platform</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Run an Lux Node with Google Cloud Platform</h1><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p>This document was written by a community member, some information may be out of dated.</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">​</a></h2><p>Google&#x27;s Cloud Platform (GCP) is a scalable, trusted and reliable hosting platform. Google operates a significant amount of it&#x27;s own global networking infrastructure. It&#x27;s <a href="https://cloud.google.com/blog/products/networking/google-cloud-networking-in-depth-cloud-cdn" target="_blank" rel="noopener noreferrer">fiber network</a> is <strong>huge</strong> and it can provide highly stable and consistent global connectivity.
In this article we will leverage GCP to deploy a node on which Lux can installed via <a href="https://www.terraform.io/" target="_blank" rel="noopener noreferrer">terraform</a>.
Leveraging <code>terraform</code> may seem like overkill, but speaking as someone who has managed extremely large compute estates for over a decade I believe it will set you apart as an operator and administrator as it will enable you greater flexibility and provide the basis on which you can easily build further automation.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="conventions">Conventions<a class="hash-link" href="#conventions" title="Direct link to heading">​</a></h2><ul><li><code>Items</code> highlighted in this manor are GCP parlance and can be searched for further reference in the Google documentation for their cloud products.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="important-notes">Important Notes<a class="hash-link" href="#important-notes" title="Direct link to heading">​</a></h2><ul><li>The machine type used in this documentation is for reference only and the actual sizing you use will depend entirely upon the amount that is staked and delegated to the node.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="architectural-description">Architectural Description<a class="hash-link" href="#architectural-description" title="Direct link to heading">​</a></h2><p>This section aims to describe the architecture of the system that the steps in the <a href="#setup-instructions">Setup Instructions</a> section deploy when enacted. This is done so that the executor can not only deploy the reference architecture, but also understand and potentially optimize it for their needs.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="project">Project<a class="hash-link" href="#project" title="Direct link to heading">​</a></h3><p>We will create and utilize a single GCP <code>Project</code> for deployment of all resources.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="service-enablement">Service Enablement<a class="hash-link" href="#service-enablement" title="Direct link to heading">​</a></h4><p>Within our GCP project we will need to enable the following Cloud Services:</p><ul><li><code>Compute Engine</code></li><li><code>IAP</code></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="networking">Networking<a class="hash-link" href="#networking" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="compute-network">Compute Network<a class="hash-link" href="#compute-network" title="Direct link to heading">​</a></h4><p>We will deploy a single <code>Compute Network</code> object. This unit is where we will deploy all subsequent networking objects. It provides a logical boundary and securitization context should you wish to deploy other chain stacks or other infrastructure in GCP.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="public-ip">Public IP<a class="hash-link" href="#public-ip" title="Direct link to heading">​</a></h4><p>Lux requires that a validator communicate outbound on the same public IP address that it advertizes for other peers to connect to it on. Within GCP this precludes the possibility of us using a Cloud NAT Router for the outbound communications and requires us to bind the public IP that we provision to the interface of the machine. We will provision a single <code>EXTERNAL</code> static IPv4 <code>Compute Address</code>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="subnets">Subnets<a class="hash-link" href="#subnets" title="Direct link to heading">​</a></h4><p>For the purposes of this documentation we will deploy a single <code>Compute Subnetwork</code> in the US-EAST1 <code>Region</code> with a /24 address range giving us 254 IP addresses (not all usable but for the sake of generalized documentation).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="compute">Compute<a class="hash-link" href="#compute" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="disk">Disk<a class="hash-link" href="#disk" title="Direct link to heading">​</a></h4><p>We will provision a single 400GB <code>PD-SSD</code> disk that will be attached to our VM.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="instance">Instance<a class="hash-link" href="#instance" title="Direct link to heading">​</a></h4><p>We will deploy a single <code>Compute Instance</code> of size <code>e2-standard-8</code>. Observations of operations using this machine specification suggest it is memory over provisioned and could be brought down to 16GB using custom machine specification; but please review and adjust as needed (the beauty of compute virtualization!!).</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="zone">Zone<a class="hash-link" href="#zone" title="Direct link to heading">​</a></h4><p>We will deploy our instance into the <code>US-EAST1-B</code> <code>Zone</code></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="firewall">Firewall<a class="hash-link" href="#firewall" title="Direct link to heading">​</a></h4><p>We will provision the following <code>Compute Firewall</code> rules:</p><ul><li>IAP INGRESS for SSH (TCP 22) - this only allows GCP IAP sources inbound on SSH.</li><li>P2P INGRESS for LUX Peers (TCP 9651)</li></ul><p>These are obviously just default ports and can be tailored to your needs as you desire.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="-setup-instructions"><a name="setup-instructions"></a> Setup Instructions<a class="hash-link" href="#-setup-instructions" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="gcp-account">GCP Account<a class="hash-link" href="#gcp-account" title="Direct link to heading">​</a></h3><ol><li>If you don&#x27;t already have a GCP account go create one <a href="https://console.cloud.google.com/freetrial" target="_blank" rel="noopener noreferrer">here</a></li></ol><p>You will get some free bucks to run a trial, the trial is feature complete but your usage will start to deplete your free bucks so turn off anything you don&#x27;t need and/or add a credit card to your account if you intend to run things long term to avoid service shutdowns.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="project-1">Project<a class="hash-link" href="#project-1" title="Direct link to heading">​</a></h3><p>Login to the GCP <code>Cloud Console</code> and create a new <code>Project</code> in your organization. Let&#x27;s use the name <code>my-lux-nodes</code> for the sake of this setup.</p><ol><li><img loading="lazy" alt="Select Project Dropdown" src="/assets/images/cloud_console_project_dropdown-8bfff56a717f36ae5c6676a1f8090975.png" width="833" height="182" class="img_ev3q"></li><li><img loading="lazy" alt="Click New Project Button" src="/assets/images/cloud_console_new_project_button-e015158a5a636496099b6a0d921d7de2.png" width="788" height="237" class="img_ev3q"></li><li><img loading="lazy" alt="Create New Project" src="/assets/images/cloud_console_create_new_project-1356151586e6ff0bc43c8a08f739155c.png" width="604" height="480" class="img_ev3q"></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="terraform-state">Terraform State<a class="hash-link" href="#terraform-state" title="Direct link to heading">​</a></h3><p>Terraform uses a state file(s) to compose a differential between current infrastructure configuration and the proposed plan. You can store this state in a variety of different places, but using GCP storage is a reasonable approach given where we are deploying so we will stick with that.</p><ol><li><img loading="lazy" alt="Select Cloud Storage Browser" src="/assets/images/cloud_storage_browser-6b8377d8b35ee73f84a73ad1d66c30f5.png" width="525" height="287" class="img_ev3q"></li><li><img loading="lazy" alt="Create New Bucket" src="/assets/images/cloud_storage_create_bucket-467caf63bb82f2453fbc66e6c5fbac1c.png" width="679" height="158" class="img_ev3q"></li></ol><p>Authentication to GCP from terraform has a few different options which are layed out <a href="https://www.terraform.io/language/settings/backends/gcs" target="_blank" rel="noopener noreferrer">here</a>. Please chose the option that aligns with your context and ensure those steps are completed before continuing.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>Depending upon how you intend to execute your terraform operations you may or may not need to enable public access to the bucket. Obviously, not exposing the bucket for <code>public</code> access (even if authenticated) is preferable. If you intend to simply run terraform commands from your local machine then you will need to open the access up.
I recommend to employ a full CI/CD pipeline using GCP Cloud Build which if utilized will mean the bucket can be marked as <code>private</code>. A full walkthrough of Cloud Build setup in this context can be found <a href="https://cloud.google.com/architecture/managing-infrastructure-as-code" target="_blank" rel="noopener noreferrer">here</a></p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="clone-github-repository">Clone Github Repository<a class="hash-link" href="#clone-github-repository" title="Direct link to heading">​</a></h3><p>I have provided a rudimentary terraform construct to provision a node on which to run Lux which can be found <a href="https://github.com/luxdefi/lux-docs/tree/master/static/scripts/terraform-gcp/projects/my-lux-project" target="_blank" rel="noopener noreferrer">here</a>.
Documentation below assumes you are using this repository but if you have another terraform skelaton similar steps will apply.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="terraform-configuration">Terraform Configuration<a class="hash-link" href="#terraform-configuration" title="Direct link to heading">​</a></h3><ol><li>If running terraform locally, please <a href="https://learn.hashicorp.com/tutorials/terraform/install-cli" target="_blank" rel="noopener noreferrer">install</a> it.</li><li>In this repository, navigate to the <code>terraform</code> directory.</li><li>Under the <code>projects</code> directory, rename the <code>my-lux-project</code> directory to match your GCP project name that you created (not required, but nice to be consistent)</li><li>Under the folder you just renamed locate the <code>terraform.tfvars</code> file.</li><li>Edit this file and populate it with the values which make sense for your context and save it.</li><li>Locate the <code>backend.tf</code> file in the same directory.</li><li>Edit this file ensuring to replace the <code>bucket</code> property with the GCS bucket name that you created earlier.</li></ol><p>If you do not with to use cloud storage to persist terraform state then simply switch the <code>backend</code> to some other desirable provider.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="terraform-execution">Terraform Execution<a class="hash-link" href="#terraform-execution" title="Direct link to heading">​</a></h3><p>Terraform enables us to see what it would do if we were to run it without actually applying any changes... this is called a <code>plan</code> operation. This plan is then enacted (optionally) by an <code>apply</code>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="plan">Plan<a class="hash-link" href="#plan" title="Direct link to heading">​</a></h4><ol><li>In a terminal which is able to execute the <code>tf</code> binary, <code>cd</code> to the ~<code>my-lux-project</code> directory that you renamed in step 3 of <code>Terraform Configuration</code>.</li><li>Execute the command <code>tf plan</code></li><li>You should see a JSON output to the stdout of the terminal which lays out the operations that terraform will execute to apply the intended state.</li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="apply">Apply<a class="hash-link" href="#apply" title="Direct link to heading">​</a></h4><ol><li>In a terminal which is able to execute the <code>tf</code> binary, <code>cd</code> to the ~<code>my-lux-project</code> directory that you renamed in step 3 of <code>Terraform Configuration</code>.</li><li>Execute the command <code>tf apply</code></li></ol><p>If you want to ensure that terraform does <strong>exactly</strong> what you saw in the <code>apply</code> output, you can optionally request for the the <code>plan</code> output to be saved to a file to feed to <code>apply</code>. This is generally considered best practice in highly fluid environments where rapid change is occurring from multiple sources.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">​</a></h2><p>Establishing CI/CD practices using tools such as Github and Terraform to manage your infrastructure assets is a great way to ensure base disaster recovery capabilities and to ensure you have a place to embed any ~tweaks you have to make operationally removing the potential to miss them when you have to scale from 1 node to 10.
Having an automated pipeline also gives you a place to build a bigger house... what starts as your interest in building and managing a single LUX node today can quickly change into you building an infrastructure operation for many different chains working with multiple different team members. I hope this may have inspired you to take a leap into automation in this context!</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/luxdefi/network-docs/edit/main/docs/nodes/build/set-up-an-lux-node-with-google-cloud-platform.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/nodes/build/set-up-an-lux-node-with-microsoft-azure"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Run an Lux Node with Microsoft Azure</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/nodes/maintain/node-backup-and-restore"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Node Backup and Restore</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#conventions" class="table-of-contents__link toc-highlight">Conventions</a></li><li><a href="#important-notes" class="table-of-contents__link toc-highlight">Important Notes</a></li><li><a href="#architectural-description" class="table-of-contents__link toc-highlight">Architectural Description</a><ul><li><a href="#project" class="table-of-contents__link toc-highlight">Project</a></li><li><a href="#networking" class="table-of-contents__link toc-highlight">Networking</a></li><li><a href="#compute" class="table-of-contents__link toc-highlight">Compute</a></li></ul></li><li><a href="#-setup-instructions" class="table-of-contents__link toc-highlight"><a name="setup-instructions"></a> Setup Instructions</a><ul><li><a href="#gcp-account" class="table-of-contents__link toc-highlight">GCP Account</a></li><li><a href="#project-1" class="table-of-contents__link toc-highlight">Project</a></li><li><a href="#terraform-state" class="table-of-contents__link toc-highlight">Terraform State</a></li><li><a href="#clone-github-repository" class="table-of-contents__link toc-highlight">Clone Github Repository</a></li><li><a href="#terraform-configuration" class="table-of-contents__link toc-highlight">Terraform Configuration</a></li><li><a href="#terraform-execution" class="table-of-contents__link toc-highlight">Terraform Execution</a></li></ul></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight">Conclusion</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://chat.lux.network" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/luxdefi" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://t.me/luxdefi" target="_blank" rel="noopener noreferrer" class="footer__link-item">Telegram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://medium.com/luxdefi" target="_blank" rel="noopener noreferrer" class="footer__link-item">Medium<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://youtube.com/luxdefi" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://ecosystem.lux.network" target="_blank" rel="noopener noreferrer" class="footer__link-item">Ecosystem<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/luxdefi/network-docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Lux Partners Limited</div></div></div></footer></div>
<script src="/assets/js/runtime~main.bb3b2830.js"></script>
<script src="/assets/js/main.199c8d31.js"></script>
</body>
</html>